!function(){"use strict";var e=(new Date).getTime();angular.module("app",["ngSanitize","agGrid","ui.bootstrap.typeahead","colorService","fnfConstants","actionLabelMappingService","shortcutService","notify","keyboard","app.keyboard","folderBtnDirective","menuitemDirective","toolmenuitemDirective","filecountDirective","pathLabelDirective","filterInputDirective","rightClickDirective","longClickDirective","longPressDirective","colorPopoverDirective","templates","socket","filesocket","searchService","ChdirActionController","chdirActionService","chdirGridOptionsFactory","gridModel","gridOptions","executorFactory","actionQueueService","dialogActionMappingService","dialogService","tabService","eventCacheFactory","SelectionController","DeselectionController","shellActionService","openfileActionService","commandService","FindActionController","findActionService","DeleteEmptyFoldersActionController","deleteEmptyFoldersActionService","DeleteActionController","deleteActionService","CopyActionController","copyActionService","GroupfilesActionController","groupfilesActionService","groupfilesTableService","MoveActionController","moveActionService","MkdirActionController","mkdirActionService","RenameActionController","renameActionService","MultirenameActionController","multirenameActionService","multirenameDataService","GotoAnythingController","gotoAnythingService","JobQueueController","jobQueueGridOptionsFactory","jobService","configService","toolService","folderActionService","folderService","actionService","initService","selectionService","historyService","deepSelectionService","deepSumSizeService","dropDirective","dragEnterDirective","dragOverDirective","dragLeaveDirective","DropActionController","dropActionService","dropzoneDirective","clipboardService","gridiconService","mainService"]).config(["$provide","$compileProvider","$logProvider",function(e,t,n){n.debugEnabled(!1),t.debugInfoEnabled(!1)}]).run(["$log","searchService","$timeout","$templateCache",function(t,n,i,o){var a=(new Date).getTime();t.info("FnF app started in "+(a-e)+" ms."),t.info("searchService",n.init()),i(function(){$("[tabindex]").removeAttr("tabindex"),document.addEventListener("dragover",function(e){return e.preventDefault(),!1},!1),document.addEventListener("drop",function(e){return e.preventDefault(),!1},!1)},234)}])}(),$(function(){$('[data-toggle="tooltip"]').tooltip(),$('[data-toggle="popover"]').popover()}),function(){"use strict";function e(e,t,n,i,o,a,r,l,c,s,d,u,f,g,p,m,v,b){v.info("AppController...");var h=this;h.colorPopoverVisible=!1,h.getShortcutByActionId=r.getShortcutByActionId,h.printShortcutByActionId=r.printShortcutByActionId,h.getLabelForAction=r.getLabelForAction;var S=r.kbdHtml;h.printShortcutByActionIdAsHtml=function(e){return S(h.printShortcutByActionId(e))},h.data=o.getData(),h.getGridOptions=i.getGridOptions,h.getGridModel=i.getGridModel,h.getGridModelCount=i.getGridModelCount,h.action=u.action,h.init=n.init,h.getFolderLabel=t.getFolderLabel,h.getQueueStatus=a.getQueueStatus,h.getQueueProgress=a.getQueueProgress,h.getDir=e.getDir,h.getActivePath=e.getSourceDir,h.onTabDblclicked=e.onTabDblclicked,h.onTabClicked=e.onTabClicked,h.addTab=e.addTab,h.reload=e.reload,h.setFolder=e.setFolder,h.isFav=p.isFav,h.unfav=p.unfav,h.fav=p.fav,h.popupMenu=function(e,t){f.emit("SHOW_POPUP",{event:e,panelIndex:t})},h.getLatest=g.getLatest,h.setActivePanel=function(e){h.data.activePanelIndex=e},h.setStyle=function(e){m.loadColorConfig(e,function(t){if(200===t.status){h.data.colorname=e;for(var n in t.data.colors)document.documentElement.style.setProperty(n,t.data.colors[n])}})},h.openDropDialog=function(e){h.action(h.OPEN_DROP_DLG)},h.setFolderOnActivePanel=function(e){h.setFolder(h.data.activePanelIndex,e)},h.runTool=e.runTool,l.applyConstants(h),f.addListener(a.ACTION_REFRESH_PANEL,function(e,t){v.info(a.ACTION_REFRESH_PANEL,e,t),h.reload(e.index)}).addListener("FILES_DROPPED",function(e,t){v.info("files",e)}),v.log(c.iam),v.log(s.iam)}angular.module("app").controller("AppController",e),e.$inject=["mainService","folderService","initService","gridService","dataService","actionQueueService","shortcutService","constantsService","selectionService","folderActionService","tabService","actionService","notifyService","historyService","configService","colorService","$log","$timeout"]}(),function(){"use strict";function e(e,t,n,i,o,a,r){var l={},c=t.getGridApi,s=t.getGridOptions,d=t.getGridModel,u=n.getActiveTab,f=n.getTabCount,g=n.getTabs,p=n.selectPanel,m=a.openFile,v=r.execute,b=e.getData(),h=function(e){var t,n=[],i=e.cmd;if(e.para&&(i+=e.para),i.indexOf("$file")>-1){var o=j(),a=e.fileLimit;if(a||(a=10),0===o.length){var r=U();r&&o.push(r)}for(t=0;t<o.length&&a>t;t++){var l=o[t].dir+"/"+o[t].base;n.push(i.replace(/\$file/g,l))}}if(0===n.length&&n.push(i),i.indexOf("$dir")>-1){var c=A();for(t=0;t<n.length;t++)n[t]=n[t].replace(/\$dir/g,c)}v(n)},S=function(){var e=o.getPrevFolder(A());e&&de(D(),e)},E=function(){var e=A().replace(/\\/g,"/");if(e.indexOf("/")>-1){var t=e.split("/"),n=t.slice(0,t.length-1).join("/");de(D(),n)}},_=function(){return Math.abs(b.activePanelIndex-1)},D=function(){return b.activePanelIndex},O=function(){return u(_())},y=function(){return u(D())},C=function(e){return u(e)},A=function(){return y().path},N=function(){return O().path},T=function(e){return C(e).path},L=function(){return c(_())},x=function(){return c(D())},P=function(){return s(_())},k=function(){return s(D())},I=function(){return d(_())},w=function(){return d(D())},R=function(){var e=x().getSelectedRows();if(e&&e.length)return e;var t=G();return t?[t]:[]},F=function(){return x().getSelectedRows()},M=function(){var e=F();return e.length>0?e[0]:null},G=function(){var e=x(),t=e.getFocusedCell();return t?t.node.data:null},U=function(){var e=M();if(e)return e;if(e=G())return e;var t=x(),n=t.grid.gridOptions.rowData;return n&&n.length>0?n[0]:null},j=function(){for(var e=F(),t=[],n=0;n<e.length;n++)e[n].isDir||t.push(e[n]);return t},H=function(){for(var e=F(),t=[],n=0;n<e.length;n++)t.push(e[n]);return t},z=function(){for(var e=F(),t=[],n=0;n<e.length;n++)e[n].isDir&&t.push(e[n].dir+"/"+e[n].base);return t},B=function(){var e=F();return e.length},W=function(){var e,t=[],n=A(),i=function(e){e=V(e),e!=n&&-1===t.indexOf(e)&&t.push(e)};for(i(O().path),e=0;e<b.favs.length;e++)i(b.favs[e]);var o=g(_());for(e=0;e<o.length;e++)i(o[e].path);for(o=g(D()),e=0;e<o.length;e++)i(o[e].path);for(e=0;e<b.folderHistory.length;e++)i(b.folderHistory[e]);return t},K=function(){return b.folderHistory},V=function(e){return e?e.replace(/\\/g,"/"):null},Q=function(e,t){var n=function(){p(e)};i.loadDirectory(e,t,n)},Y=function(){s(D()).lastRowIndex=J()},J=function(){var e=x(),t=e.getFocusedCell();if(t)return t.rowIndex;var n=e.getSelectedNodes();return n&&n.length>0?n[0].childIndex:0},q=function(e,t){n.onTabDblclicked(e,t,function(t){Q(e,{path:t.path})})},X=function(e,t){n.onTabClicked(e,t,function(e,t){Q(e,{path:t.path,fileList:t.fileList})})},Z=function(e){n.addTab(e,function(e,t){Q(e,{path:t.path})})},ee=function(){Z(D())},te=function(){var e=D();f(e)>1&&q(e,y())},ne=function(e){var t=u(e);t.fileList||Q(e,{path:u(e).path,nocache:!0})},ie=function(){var e=x();e.setFocusedCell(0,0)},oe=function(){var e=x(),t=k();e.setFocusedCell(t.rowData.length-1,0)},ae=function(){var e=x(),t=e.getFocusedCell();if(t){var n=k(),i=le(n),o=t.rowIndex-i+1;o=Math.max(0,Math.min(n.rowData.length-1,o)),e.setFocusedCell(o,0)}},re=function(){var e=x(),t=e.getFocusedCell();if(t){var n=k(),i=le(n),o=t.rowIndex+i-1;o=Math.max(0,Math.min(n.rowData.length-1,o)),e.setFocusedCell(o,0)}},le=function(e){var t=e.api,n=$(t.gridPanel.eBody).height(),i=(n-1e-8*e.headerHeight)/e.rowHeight;return i=parseInt(""+i)},ce=function(){var e=U();if(e){var t=e.dir+"/"+e.base;if(e.isDir){var n=D();de(n,t)}else m(t)}},se=function(){var e=x(),t=k(),n=e.getFocusedCell();if(n){var i=n.rowIndex,o=n.node,a=e.isNodeSelected(o);a?e.deselectNode(o,!1):e.selectNode(o,!0,!1),i++,i=Math.max(0,Math.min(t.rowData.length-1,i)),e.setFocusedCell(i,0)}},de=function(e,t,i){var o=V(t).split("/"),a=n.getActiveTab(e);a.path=t,a.label=o[o.length-1],Q(e,{path:t},i)},ue=function(e,t,n,i,o){return(t=Math,n=t.log,i=1e3,o=n(e)/n(i)|0,e/t.pow(i,o)).toFixed(2)+" "+(o?"kMGTPEZY"[--o]+"B":"Bytes")},fe=function(e,t,n,i,o){return(t=Math,n=t.log,i=1024,o=n(e)/n(i)|0,e/t.pow(i,o)).toFixed(2)+" "+(o?"KMGTPEZY"[--o]+"iB":"Bytes")};return l.onHomePressed=ie,l.onEndPressed=oe,l.onPageUpPressed=ae,l.onPageDownPressed=re,l.storeLastRowIndex=Y,l.onEnterPressed=ce,l.toggleCurrentRow=se,l.runTool=h,l.openFile=m,l.fileSizeSI=ue,l.fileSizeIEC=fe,l.loadDirectory=Q,l.setFolder=de,l.onTabDblclicked=q,l.onTabClicked=X,l.addTab=Z,l.addNewTabOnActivePanel=ee,l.removeTabOnActivePanel=te,l.reload=ne,l.navigateDown=E,l.navigateBack=S,l.getTargetPanelIndex=_,l.getSourcePanelIndex=D,l.getTargetTab=O,l.getSourceTab=y,l.getTab=C,l.getTargetDir=N,l.getSourceDir=A,l.getDir=T,l.getTargetGridApi=L,l.getSourceGridApi=x,l.getTargetGridOptions=P,l.getSourceGridOptions=k,l.getTargetGridModel=I,l.getSourceGridModel=w,l.getFocusedRow=G,l.getRowsForAction=R,l.getSelectedRows=F,l.getSelectedFiles=j,l.getSelectedFilesAndFolders=H,l.getSelectedAbsoluteFolders=z,l.getSelectedCount=B,l.getFirstSelectedItem=M,l.getFirstPossibleRow=U,l.getFolderHistory=K,l.getPossibleTargetFolders=W,l.slash=V,l}angular.module("mainService",[]).factory("mainService",e),e.$inject=["dataService","gridService","tabService","folderService","historyService","openfileActionService","shellActionService"]}(),function(){"use strict";function e(e,t,n){e.info("gridService...");var i={},o=function(){var e=n.getOptions();return t.getInstance(e)},a={gridModels:[o(),o()]},r=function(e){for(var t=[],n=e.getSelectedNodes(),i=0;i<n.length;i++){var o=n[i].data;t.push({dir:o.dir,base:o.base})}return t},l=function(e,t){t.forEachNode(function(n){var i=c(n.data,e);i&&t.selectNode(n,!0)})},c=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(i.base===e.base&&i.dir===e.dir)return!0}return!1},s=function(){var e=[o(),o()];return e},d=function(e){return u(e).api},u=function(e){return f(e).getGridOptions()},f=function(e){return a.gridModels[e]},g=function(){return a.gridModels.length},p=function(e){var t=d(e),n=u(e),i=n.lastRowIndex;if(void 0===i){var o=t.getFocusedCell();if(o)i=o.rowIndex;else{var a=t.getSelectedNodes();a&&a.length>0&&(i=a[0].childIndex)}}void 0===i&&(i=0),i=Math.max(0,Math.min(n.rowData.length-1,i)),t.setFocusedCell(i,0)};return i.storeSelection=r,i.restoreSelection=l,i.getGridModels=s,i.getGridApi=d,i.getGridOptions=u,i.getGridModel=f,i.getGridModelCount=g,i.autoFocusedCell=p,i}angular.module("app").service("gridService",e),e.$inject=["$log","gridModelFactory","gridOptionsFactory"]}(),function(){"use strict";function e(){var e=function(e){var t=function(){if(!e.api)return 0;var t=0;return e.api.forEachNode(function(e,n){e.data.isDir&&t++}),t},n=function(){if(!e.api)return 0;var t=0;return e.api.forEachNode(function(e,n){e.data.isDir||t++}),t},i=function(){if(!e.api)return 0;var t=0;return e.api.forEachNode(function(e,n){e.data.size&&(t+=e.data.size)}),t/1e3},o=function(){if(!e.api)return 0;for(var t=e.api.getSelectedRows(),n=0,i=0;i<t.length;i++)t[i].isDir&&n++;return n},a=function(){return l(i())},r=function(){return l(s())},l=function(e,t,n,i,o){return(t=Math,n=t.log,i=1e3,o=n(e)/n(i)|0,e/t.pow(i,o)).toFixed(2)+" "+(o?"kMGTPEZY"[--o]+"B":"Bytes")},c=function(){if(!e.api)return 0;for(var t=e.api.getSelectedRows(),n=0,i=0;i<t.length;i++)t[i].isDir||n++;return n},s=function(){if(!e.api)return 0;for(var t=e.api.getSelectedRows(),n=0,i=0;i<t.length;i++)t[i].size&&(n+=t[i].size);return n/1e3},d=function(){return e},u={};return u.getFolderCount=t,u.getFileCount=n,u.getSizeSum=i,u.getSizeSumText=a,u.getSelectedFolderCount=o,u.getSelectedFileCount=c,u.getSelectedSizeSum=s,u.getSelectedSizeSumText=r,u.getGridOptions=d,u};return{getInstance:function(t){return new e(t)}}}angular.module("gridModel",[]).factory("gridModelFactory",e),e.$inject=[]}(),function(){"use strict";function e(e){var t=0,n=function(){var n=[{headerName:"Name",field:"base",width:430,cellRenderer:e.nameCellRenderer,comparator:e.nameComparator,sort:"asc",icons:e.TEXT_SORT_ICONS,cellClassRules:e.cellClassRules},{headerName:"Ext",field:"ext",width:80,cellRenderer:e.extCellRenderer,icons:e.TEXT_SORT_ICONS,cellClassRules:e.cellClassRules},{headerName:"Size",field:"size",width:110,"volatile":!0,icons:e.ALPHA_ICONS,cellRenderer:e.sizeCellRenderer,comparator:e.sizeComparator,cellStyle:{"text-align":"right"},cellClassRules:e.cellClassRules},{headerName:"Date",field:"date",width:180,cellRenderer:e.dateCellRenderer,cellClassRules:e.cellClassRules}],i=[],o=function(e){var t=this;setTimeout(function(){if(e.event.shiftKey&&void 0!==t.previousSelectedRowIndex)for(var n=e.rowIndex<t.previousSelectedRowIndex?e.rowIndex:t.previousSelectedRowIndex,i=e.rowIndex>t.previousSelectedRowIndex?e.rowIndex:t.previousSelectedRowIndex,o=n;i>=o;o++)t.api.selectIndex(o,!0,!1);t.previousSelectedRowIndex=e.rowIndex},0)},a=function(e){var t=e.rowIndex;$(".ag-row-focus",this.api.grid.gridPanel.eBodyContainer).removeClass("ag-row-focus"),$('.ag-row[row="'+t+'"]',this.api.grid.gridPanel.eBodyContainer).addClass("ag-row-focus")},r={gid:t++,headerHeight:30,rowHeight:28,columnDefs:n,rowData:i,rowSelection:"multiple",rowDeselection:!0,enableColResize:!0,enableFilter:!0,enableSorting:!0,sortingOrder:["asc","desc"],icons:e.ICONS,onCellFocused:a,onRowClicked:o};return r};return{getOptions:function(){return new n}}}angular.module("gridOptions",[]).factory("gridOptionsFactory",e),e.$inject=["gridiconService"]}(),function(){"use strict";function e(){var e={},t=function(t){return t.ICONS={columnRemoveFromGroup:'<i class="fa fa-remove"/>',filter:'<i class="fa fa-filter"/>',sortAscending:'<i class="fa fa-long-arrow-down"/>',sortDescending:'<i class="fa fa-long-arrow-up"/>',groupExpanded:'<i class="fa fa-minus-square-o"/>',groupContracted:'<i class="fa fa-plus-square-o"/>',headerGroupOpened:'<i class="fa fa-minus-square-o"/>',headerGroupClosed:'<i class="fa fa-plus-square-o"/>'},t.TEXT_SORT_ICONS={sortAscending:'<i class="fa fa-sort-alpha-asc"/>',sortDescending:'<i class="fa fa-sort-alpha-desc"/>'},t.ALPHA_ICONS={sortAscending:'<i class="fa fa-sort-amount-asc"/>',sortDescending:'<i class="fa fa-sort-amount-desc"/>'},t.fileCellRenderer=function(e){if(!e.value)return"";var t=e.value.dir?(e.value.dir+"/").replace(/\\/g,"/"):"",n=e.value.base?e.value.base:"";return t+n},t.fileBaseCellRenderer=function(e){return e.value&&e.value.base?e.value.base:""},t.extCellRenderer=function(e){return e&&e.data?e.data.isDir?"":e.value?e.value:"":""},t.nameCellRenderer=function(e){if(!e)return"";if(!e.data)return"";if(e.data.abs)return e.data.dir+"/"+e.data.base;var t=e.value;return e.data.isDir||(t=e.value.replace(e.data.ext,"")),e.data.isDir?'<i class="fa fa-folder"></i> ['+t+"]":e.data.error&&"EPERM"===e.data.error.code?'<i class="text-muted">'+t+"</i>":e.data.ext.match(/\.doc(x)?$/)?'<i class="fa fa-file-word-o"></i> '+t:e.data.ext.match(/\.epub$|\.rtf$|\.txt$/)?'<i class="fa fa-file-text-o"></i> '+t:e.data.ext.match(/\.pdf$/)?'<i class="fa fa-file-pdf-o"></i> '+t:e.data.ext.match(/\.avi$|\.mkv$|\.wmv$|\.mp(e)?g$|\.mov$|\.ram$/)?'<i class="fa fa-file-video-o"></i> '+t:e.data.ext.match(/\.ppt(x)?$/)?'<i class="fa fa-file-powerpoint-o"></i> '+t:e.data.ext.match(/\.xls(x)?$/)?'<i class="fa fa-file-excel-o"></i> '+t:e.data.ext.match(/\.bmp$|\.gif$|\.jpg$/)?'<i class="fa fa-file-image-o"></i> '+t:e.data.ext.match(/\.js$|\.java$|\.json$/)?'<i class="fa fa-file-code-o"></i> '+t:e.data.ext.match(/\.zip$|\.rarp$|\.7z$/)?'<i class="fa fa-file-archive-o"></i> '+t:e.data.ext.match(/\.mp3$|\.wav$/)?'<i class="fa fa-file-audio-o"></i> '+t:'<i class="fa fa-file-o"></i> '+t},t.sizeCellRenderer=function(e){return e&&e.data?"temp"===e.data.status?"-":e.value?e.value.toLocaleString("en-US",{minimumFractionDigits:0}):e.data.isDir?"&lt;DIR&gt;":"?":""},t.dateCellRenderer=function(e){return e.data?"temp"===e.data.status?"-":e.value?e.value.toString().substr(0,16).replace(/[A-Z]/g," "):"?":""},t.cellClassRules={"text-muted":function(e){return e.data&&"temp"===e.data.status},"fnf-long-text":function(e){return e.data.abs&&"base"===e.colDef.field},"fnf-display-none":function(e){return e.data.abs&&"base"!==e.colDef.field},"text-success":function(e){return e.data.isWalking&&"size"===e.colDef.field}},t.nameComparator=function(e,t,n,i,o){var a=o?-1:1;if(!n)return a;if(!i)return-a;if(!e)return a;if(!t)return-a;if(!n.data)return a;if(!i.data)return-a;var r=e.toUpperCase(),l=t.toUpperCase();return n.data.isDir&&!i.data.isDir?-a:!n.data.isDir&&i.data.isDir?a:n.data.isDir&&i.data.isDir?r.localeCompare(l):r.localeCompare(l)},t.sizeComparator=function(e,t,n,i,o){var a=o?-1:1;if(!n)return a;if(!i)return-a;if(!e)return a;if(!t)return-a;if(!n.data)return a;if(!i.data)return-a;var r=n.data.base.toUpperCase(),l=i.data.base.toUpperCase();return n.data.isDir&&!i.data.isDir?-a:!n.data.isDir&&i.data.isDir?a:n.data.isDir&&i.data.isDir?r.localeCompare(l):e-t},e};return t(e),e.applyConstants=t,e}angular.module("gridiconService",[]).factory("gridiconService",e),e.$inject=[]}(),function(){"use strict";function e(e){return{restrict:"E",scope:{quickFilterText:"="},link:function(t,n,i){var o=null,a=function(){o&&e.cancel(o),o=e(function(){t.quickFilterText&&""!==t.quickFilterText||(t.filterInputVisible=!1)},6666)};t.filterInputVisible=!1,t.filterInputChanged=function(){o&&e.cancel(o),""===t.quickFilterText&&a()},t.onClicked=function(){t.filterInputVisible=!t.filterInputVisible,t.filterInputVisible?a():t.quickFilterText=""},t.onDblClicked=function(){t.quickFilterText="",a()}},templateUrl:"/fnf/gui/filterinput/filterinput.html"}}angular.module("filterInputDirective",[]).directive("filterInput",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(){return{restrict:"E",scope:{startingPoints:"=",label:"=",onFolderChanged:"&"},link:function(e,t,n){},templateUrl:"/fnf/gui/folderbutton/folderbutton.html"}}angular.module("folderBtnDirective",[]).directive("folderbtn",e),e.$inject=[]}(),function(){"use strict";function e(){return{restrict:"E",scope:{model:"="},link:function(e,t,n){},templateUrl:"/fnf/gui/filecount/filecount.html"}}angular.module("filecountDirective",[]).directive("filecount",[e]),e.$inject=[]}(),function(){"use strict";function e(e){var t=["$scope",function(t){var n=t,i=e.printShortcutByActionId,o=e.kbdHtml;n.$watch("mid",function(n,a){n&&(t.shortcut=o(i(n)),t.label=e.getLabelForAction(n),t.id=n)}),n.clickOn=function(){t.onItemClicked({mid:t.id})}}];return{restrict:"E",scope:{mid:"=",onItemClicked:"&"},link:function(e,t,n){},controller:t,templateUrl:"/fnf/gui/menuitem/menuitem.html"}}angular.module("menuitemDirective",[]).directive("menuitem",e),e.$inject=["shortcutService"]}(),function(){"use strict";function e(e){var t=["$scope",function(t){var n=t,i=e.printShortcut,o=e.kbdHtml;n.$watch("tool",function(e,n){if(e){var a=e;t.shortcut=o(i(a.shortcut)),t.label=a.label,t.id=a.id,t.tool=a}}),n.clickOn=function(){t.onItemClicked({tool:t.tool})}}];return{restrict:"E",scope:{tool:"=",onItemClicked:"&"},link:function(e,t,n){},controller:t,templateUrl:"/fnf/gui/menuitem/menuitem.html"}}angular.module("toolmenuitemDirective",[]).directive("toolmenuitem",e),e.$inject=["shortcutService"]}(),function(){"use strict";function e(e){var t=function(e){return e?e.replace(/\\/g,"/"):""},n=["$scope",function(e){e.$watch("path",function(n,i){if(n){var o=t(n).split("/");e.pathes=o}}),e.clickOnIndex=function(t){var n=e.pathes.slice(0,t+1).join("/");e.onFolderChanged({folder:n})}}];return{restrict:"E",scope:{path:"=",onFolderChanged:"&"},link:function(e,t,n){},controller:n,templateUrl:"/fnf/gui/pathlabel/pathlabel.html"}}angular.module("pathLabelDirective",[]).directive("pathlabel",e),e.$inject=["$log"]}(),function(){"use strict";function e(e){return{restrict:"A",scope:{fn:"&rightClick",event:"=event"},link:function(t,n,i){document.oncontextmenu=function(e){return e.target.hasAttribute("right-click")?!1:void e.preventDefault()};var o=function(n){t.event=n,console.info("ev",n),e(function(){t.$apply(t.fn({event:t.event}))},111)};n.bind("contextmenu",o)}}}angular.module("rightClickDirective",[]).directive("rightClick",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(e){return{restrict:"A",scope:{fn:"&longClick",event:"=event"},link:function(t,n,i){var o=0;t.event=void 0;var a=function(e){o=Date.now(),t.event=e,e.preventDefault()},r=function(){Date.now()-o>1e3&&e(function(){t.$apply(t.fn({event:t.event}))},111)};n.bind("touchstart mousedown",a),n.bind("touchend mouseup",r)}}}angular.module("longClickDirective",[]).directive("longClick",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(e){return{restrict:"A",scope:{fn:"&longPress",event:"=event"},link:function(t,n,i){var o=0;t.event=void 0;var a=function(n){o=e(r,1e3),t.event=n,n.preventDefault()},r=function(){l(),e(function(){t.$apply(t.fn({event:t.event}))},111)},l=function(){e.cancel(o)};n.bind("touchstart mousedown",a),n.bind("touchend mouseup",l)}}}angular.module("longPressDirective",[]).directive("longPress",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(e,t){var n=0,i=0;return{restrict:"E",scope:{visible:"=visible",target:"=target"},link:function(e,o,a){function r(e){e=e.replace(/#/g,"");for(var t="",n=0;6>n;n++)t+=(15-parseInt(e[n],16)).toString(16);return t}$(o).hide(),console.info("colorPopoverDirective...");var l=null,c=null,s=!1,d=null,u=getComputedStyle(document.documentElement),f=function(e){return String(u.getPropertyValue(e)).trim()},g=function(e,t){document.documentElement.style.setProperty(e,t)},p=function(){if(c&&l&&null!==d)if(s===!0){console.info("checkPopover is visible"),n++;var a="colorpopover_"+n;$.browser={chrome:!0};for(var u='<div id="'+a+'">',f=0;f<c.length;f++){var g=c[f];u=u+"<div><small>"+g+":</small></div>",u=u+'<input  type="text" name="color'+f+'"  class="form-control form-control-sm color-picker" maxlength="30" ng-model="color'+f+'" >'}u+="</div>";var p=angular.element(u),m=t(p),v=m(e);$(o).html(v),d.popover({trigger:"manual",container:"body",html:!0,template:'<div class="popover colorpopover" role="tooltip"><div class="popover-arrow"></div><!--h3 class="popover-title"></h3--><div class="popover-content"></div></div>',content:v}).popover("show").on("shown.bs.popover",function(){var e="#"+a+" input.color-picker";$(e).each(function(e,t){var n=$(t);return i++,n.data("tool",i),n.popover({template:'<div class="popover colorpopover" role="tooltip"><div class="popover-arrow"></div><div class="popover-content"></div></div>',trigger:"focus",placement:"bottom",html:!0,content:"<div id='colorpicker-"+n.data("tool")+"'><div class='color-picker'></div></div>"}).on("click",function(){var e="#colorpicker-"+n.data("tool"),t=$.farbtastic(e,{});t.setColor(n.val()),t.linkTo(function(e){var t=r(e);console.info("color",e),console.info("ch",t),n.val(e).change().css("background-color",e).css("color","#"+t)})})})})}else s===!1&&d.popover("hide")};e.$watch(a.values,function(t){if(t){c=t;for(var n=0;n<c.length;n++){var i=c[n];e["color"+n]=f(i),e["colorname"+n]=i,function(t){e.$watch("color"+t,function(n){g(e["colorname"+t],e["color"+t])})}(n)}}p()}),e.$watch("visible",function(e){s=e,p()}),e.$watch("target",function(e){l=e,d=$(l),p()})}}}angular.module("colorPopoverDirective",[]).directive("colorPopover",e),e.$inject=["$log","$compile"]}(),function(){"use strict";function e(e,t){return{restrict:"A",scope:{dragEnter:"&"},link:function(t,n,i){n.bind("dragenter",function(n){n.stopPropagation(),n.preventDefault(),e(function(){t.dragEnter({e:n})})})}}}angular.module("dragEnterDirective",[]).directive("dragEnter",e),e.$inject=["$timeout","$log"]}(),function(){"use strict";function e(e){return{restrict:"A",scope:{dragOver:"&"},link:function(e,t,n){t.bind("dragover",function(t){t.stopPropagation(),t.preventDefault(),e.dragOver({e:t})})}}}angular.module("dragOverDirective",[]).directive("dragOver",e),e.$inject=["$log"]}(),function(){"use strict";function e(e,t){return{restrict:"A",scope:{dragLeave:"&"},link:function(t,n,i){n.bind("dragleave",function(n){n.stopPropagation(),n.preventDefault(),e(function(){t.dragLeave({e:n})})})}}}angular.module("dragLeaveDirective",[]).directive("dragLeave",e),e.$inject=["$timeout","$log"]}(),function(){"use strict";function e(e,t){return{restrict:"A",scope:{drop:"&"},link:function(t,n,i){n.bind("drop",function(n){return n.stopPropagation(),n.preventDefault(),e(function(){t.drop({e:n})}),!1})}}}angular.module("dropDirective",[]).directive("drop",e),e.$inject=["$timeout","$log"]}(),function(){"use strict";function e(e,t){function n(n){t.info("handleFileSelect",n),n.stopPropagation(),n.preventDefault();var i=n.dataTransfer.files;e.$emit("FILES_DROPPED",i)}function i(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}function o(e){t.info(e),e.stopPropagation(),e.preventDefault(),e.target.classList.add("alert-success")}function a(e){t.info(e.target.classList),e.stopPropagation(),e.preventDefault(),e.target.classList.remove("alert-success")}var r=0;return{restrict:"A",link:function(e,l,c){var s=l.attr("id");s||(s="dopzone_"+r++,l.attr("id",s));var d=document.getElementById(s);d.addEventListener("dragenter",o,!1),d.addEventListener("dragleave",a,!1),d.addEventListener("dragover",i,!1),d.addEventListener("drop",n,!1),t.info("element",d)}}}angular.module("dropzoneDirective",[]).directive("dropzone",e),e.$inject=["notifyService","$log"]}(),function(){"use strict";function e(e,t,n,i){i.info("DropActionController...");var o=this;o.what="",o.doGoto=e.doGoto,o.doCopy=e.doCopy,o.closeDlg=e.closeDlg,o.select=function(e){o.what=e},o.clear=function(e){o.what===e&&(o.what="")},o.over=function(e){e.originalEvent.dataTransfer.dropEffect="copy",i.info("over",e)};var a=function(){};n.removeListenersForKey("OPEN_DROP_DLG_ON_SHOW").removeListenersForKey("OPEN_DROP_DLG_ON_SHOWN").removeListenersForKey("OPEN_DROP_DLG_ON_HIDDEN").addListener("OPEN_DROP_DLG_ON_SHOW",a)}angular.module("DropActionController",[]).controller("DropActionController",e),e.$inject=["dropActionService","mainService","notifyService","$log"]}(),function(){"use strict";function e(e,t,n){n.info("dropActionService...");var i=(e.getSourcePanelIndex,function(e){n.info("doGoto",e),a()}),o=function(e){n.info("doCopy",e),a()},a=function(e){$('button[data-dismiss="modal"]').click()},r={};return r.doGoto=i,r.doCopy=o,r.closeDlg=a,r}angular.module("dropActionService",[]).factory("dropActionService",e),e.$inject=["mainService","commandService","$log"]}(),function(){"use strict";function e(e,t){var n=io.connect();e.info("SocketService...",n);var i=n.removeListener,o=function(e,t){n.on(e,function(){t.apply(n,arguments)})},a=function(e,t,i){n.emit(e,t,function(){i&&i.apply(n,arguments)})},r={};return r.removeListener=i,r.on=o,r.emit=a,r}angular.module("socket",[]).factory("socketService",e),e.$inject=["$log","$rootScope"]}(),function(){"use strict";function e(e,t){var n=0,i=e.on,o=e.emit,a=e.removeListener,r=function(e,t){!function(e,n){var r=e.path,l=[],c="dir"+n;i(c,function(e){e.begin&&(l=[]),e.base&&l.push(e),e.end&&(a(c),t(null,l))}),o("dir",{path:r,rid:n,nocache:e.nocache})}(e,++n)},l=function(e){if(!e)throw Error("initialLoad(callback): callback is null.");i("initialload",function(t){e(t),a("initialload")}),o("initialload")},c={};return c.loadDirectory=r,c.initialLoad=l,c}angular.module("filesocket",[]).factory("fileSocketService",e),e.$inject=["socketService","$log"]}(),function(){"use strict";function e(e,t,n,i,o){var a={},r=["",""],l=t.getGridApi,c=function(e){return e?e.replace(/\\/g,"/"):""},s=function(e,t,i){var o=l(e);return t.fileList?(o.setRowData(t.fileList),void(r[e]="")):t.path?(n.addFolder(t.path),void((t.nocache||r[e]!==t.path)&&d(e,t,i))):(o.setRowData([]),void(r[e]=""))},d=function(t,n,a){!function(t,n){r[t]=c(n.path);var s=l(t);e.loadDirectory(n,function(e,r){return e?o.error(e):void i(function(){s.setRowData(r.slice(0)),s.sizeColumnsToFit(),a&&a(t,n)})})}(t,n)},u=function(e){return e>=r.length?"?":c(r[e]).split("/")[0]};return a.loadDirectory=s,a.getFolderLabel=u,a.slash=c,a.iam="folderService",a}angular.module("folderService",[]).factory("folderService",e),e.$inject=["fileSocketService","gridService","historyService","$timeout","$log"]}(),function(){"use strict";function e(e,t,n,i,o){o.info("folderActionService...");var a={},r=e.getGridOptions,l=e.storeSelection,c=e.restoreSelection,s=n.createCache(function(e){var n=function(e,t,n){for(var i=e.length-1;i>-1;i--)if(e[i].dir===t&&e[i].base===n)return e[i];return null};t.eachActiveTab(function(t,i,o){for(var a,s,d,u,f,g,p,m=r(i),v=m.api,b=l(v),h=!1,S=0;S<e.length;S++)if(u=e[S],u.item.dir===t.path)if("focus"===u.event){h=!1,v.deselectAll();var E=v.getModel();a=0,E.forEachNode(function(e){var t=e.data;t.base===u.item.base&&t.dir===u.item.dir&&v.setFocusedCell(e.childIndex,0),a++})}else if("select"===u.event)for(f=v.getSelectedNodes(),g=0;g<f.length;g++)p=f[g].data,p.base===u.item.base&&p.dir===u.item.dir?v.selectNode(f[g],!0,!1):v.deselectNode(f[g],!1);else if("unselect"===u.event)for(f=v.getSelectedNodes(),g=0;g<f.length;g++)p=f[g].data,p.base===u.item.base&&p.dir===u.item.dir&&v.deselectNode(f[g],!1);else if("removed"===u.event)for(a=0;a<m.rowData.length;a++)s=m.rowData[a],s.dir===u.item.dir&&s.base===u.item.base&&(m.rowData.splice(a,1),h=!0,v.refreshView(),v.setRowData(m.rowData));else if("update"===u.event)for(a=0;a<m.rowData.length;a++)s=m.rowData[a],s.dir===u.item.dir&&s.base===u.item.base&&(s.status=u.item.status,h=!0,v.refreshView());else"created"===u.event&&(d=n(m.rowData,u.item.dir,u.item.base),s=d?d:{},s.dir=u.item.dir,s.base=u.item.base,s.ext=u.item.base.substr(u.item.base.lastIndexOf(".")),u.item.size&&(s.size=u.item.size),u.item.date&&(s.date=u.item.date),u.item.isDir&&(s.isDir=!0),u.item.status?s.status=u.item.status:s.status=null,d||m.rowData.push(s),v.setRowData(m.rowData),h=!0);h&&c(b,v)})});return i.addListener("unselect",s.add),i.addListener("select",s.add),i.addListener("created",s.add),i.addListener("update",s.add),i.addListener("focus",s.add),i.addListener("removed",s.add),a.iam="folderActionService",a}angular.module("folderActionService",[]).factory("folderActionService",e),e.$inject=["gridService","tabService","eventCacheFactory","notifyService","$log"]}(),function(){"use strict";function e(e){var t=function(e){var t,n=[],i=-1,o=16,a=16e3,r=function(e){var t="function"==typeof Date.now?Date.now():(new Date).getTime();0===n.length&&(i=t),n.push(e),t-i>a?s():l()},l=function(){c(),t=window.setTimeout(s,o)},c=function(){t&&window.clearTimeout(t),t=null},s=function(){c();var t=n.slice();n=[],e(t)},d={};return d.add=r,d},n=function(e){return new t(e)},i={};return i.createCache=n,i}angular.module("eventCacheFactory",[]).factory("eventCacheFactory",e),e.$inject=["$log"]}(),function(){"use strict";function e(e,t,n,i,o){var a=e.getData();a.tabs=[[{path:"/",label:" ",active:!0}],[{path:"/",label:"",active:!0}]];var r=function(e){return e?e.replace(/\\/g,"/"):null},l=function(e){for(var t=a.tabs,n=0;n<t.length;n++)for(var i=t[n],o=0;o<i.length;o++){var r=i[o];r.active&&e(r,n,o)}},c=null,s=function(e,t,n){c&&i.cancel(c),c=i(function(){g(e,t),n(e,t),c=null},222)},d=function(e,t,n){c&&i.cancel(c),u(e,t,n)},u=function(e,t,n){if(!(a.tabs[e].length<2)){var i=a.tabs[e].indexOf(t);if(i>-1&&a.tabs[e].splice(i,1),t.active){var o=Math.max(0,i-1);a.tabs[e][o].active=!0,n(a.tabs[e][o])}}},f=function(e,t){i(function(){var n=S(e),i={path:r(n.path),label:n.label};i.fileList&&(i.path="",i.label=""),a.tabs[e].push(i),g(e,i),t(e,i)})},g=function(e,t){for(var n=a.tabs[e],i=0;i<n.length;i++)n[i].active=t===n[i]},p=function(e){var t=a.tabs[e],n=b(e);return n++,n<t.length?t[n]:t[0]},m=n.loadDirectory,v=function(e){var n=p(e);s(e,n,function(e,n){m(e,{path:n.path},function(e,n){t.autoFocusedCell(e)})})},b=function(e){for(var t=a.tabs[e],n=0;n<t.length;n++)if(t[n].active)return n;
return 0},h=function(e){return a.tabs[e].length},S=function(e){for(var t=a.tabs[e],n=0;n<t.length;n++){var i=t[n];if(i.active)return i}return null},E=function(e){return a.tabs[e]},_=function(){O(0)},D=function(){O(1)},O=function(e){i(function(){a.activePanelIndex===e?v(e):(a.activePanelIndex=e,t.autoFocusedCell(e))})},y=function(){C(Math.abs(a.activePanelIndex-1))},C=function(e){i(function(){a.activePanelIndex=e,t.autoFocusedCell(e)})},A={};return A.togglePanel=y,A.selectRightPanel=D,A.selectLeftPanel=_,A.selectPanel=C,A.eachActiveTab=l,A.getTabCount=h,A.addTab=f,A.getActiveTab=S,A.getTabs=E,A.selectTab=g,A.onTabClicked=s,A.onTabDblclicked=d,A.iam="tabService",A}angular.module("tabService",[]).factory("tabService",e),e.$inject=["dataService","gridService","folderService","$timeout","$log"]}(),function(){"use strict";function e(e,t){t.info("historyService...");var n=function(e){return e?e.replace(/\\/g,"/"):null},i=e.getData(),o=function(e){i.folderHistory.unshift(n(e)),a()},a=function(){i.folderLatestAdded=[],Array.prototype.push.apply(i.folderLatestAdded,i.initial.startingPoints);for(var e=0;e<i.folderHistory.length&&i.folderLatestAdded.length<15;e++){var t=i.folderHistory[e];-1===i.folderLatestAdded.indexOf(t)&&i.folderLatestAdded.push(t)}},r=function(e){e=n(e);var t=i.folderHistory.lastIndexOf(e);return t<i.folderHistory.length-1?i.folderHistory[t+1]:null},l={};return l.addFolder=o,l.getPrevFolder=r,l}angular.module("historyService",[]).service("historyService",e),e.$inject=["dataService","$log"]}(),function(){"use strict";function e(){var e={},t=function(t){return t.TRIGGER_DIGEST="TRIGGER_DIGEST",t.OPEN_COPY_DLG="OPEN_COPY_DLG",t.OPEN_MOVE_DLG="OPEN_MOVE_DLG",t.OPEN_MKDIR_DLG="OPEN_MKDIR_DLG",t.OPEN_DELETE_DLG="OPEN_DELETE_DLG",t.ADD_NEW_TAB="ADD_NEW_TAB",t.REMOVE_TAB="REMOVE_TAB",t.SELECT_RIGHT_PANEL="SELECT_RIGHT_PANEL",t.SELECT_LEFT_PANEL="SELECT_LEFT_PANEL",t.TOGGLE_PANEL="TOGGLE_PANEL",t.OPEN_CHDIR_DLG="OPEN_CHDIR_DLG",t.OPEN_GOTO_ANYTHING_DLG="OPEN_GOTO_ANYTHING_DLG",t.OPEN_JOB_QUEUE_DLG="OPEN_JOB_QUEUE_DLG",t.OPEN_MULTIRENAME_DLG="OPEN_MULTIRENAME_DLG",t.OPEN_RENAME_DLG="OPEN_RENAME_DLG",t.COPY_2_CLIPBOARD_FULLNAMES="COPY_2_CLIPBOARD_FULLNAMES",t.COPY_2_CLIPBOARD_NAMES="COPY_2_CLIPBOARD_NAMES",t.COPY_2_CLIPBOARD_FULLNAMES_AS_JSON="COPY_2_CLIPBOARD_FULLNAMES_AS_JSON",t.COPY_2_CLIPBOARD_NAMES_AS_JSON="COPY_2_CLIPBOARD_NAMES_AS_JSON",t.OPEN_FIND_DLG="OPEN_FIND_DLG",t.OPEN_DROP_DLG="OPEN_DROP_DLG",t.OPEN_GROUPFILES_DLG="OPEN_GROUPFILES_DLG",t.OPEN_FIND_DUBLICATES_DLG="OPEN_FIND_DUBLICATES_DLG",t.OPEN_SELECT_DLG="OPEN_SELECT_DLG",t.OPEN_DESELECT_DLG="OPEN_DESELECT_DLG",t.OPEN_DELETE_EMPTY_FOLDERS_DLG="OPEN_DELETE_EMPTY_FOLDERS_DLG",t.TOGGLE_SELECTION="TOGGLE_SELECTION",t.SELECT_ALL="SELECT_ALL",t.DESELECT_ALL="DESELECT_ALL",t.ENHANCE_SELECTION="ENHANCE_SELECTION",t.REDUCE_SELECTION="REDUCE_SELECTION",t.NAVIGATE_LEVEL_DOWN="NAVIGATE_LEVEL_DOWN",t.NAVIGATE_BACK="NAVIGATE_BACK",t.SAVE_CONFIG="SAVE_CONFIG",t.RELOAD_DIR="RELOAD_DIR",t.ENTER_PRESSED="ENTER_PRESSED",t.HOME_PRESSED="HOME_PRESSED",t.SPACE_PRESSED="SPACE_PRESSED",t.END_PRESSED="END_PRESSED",t.PAGEUP_PRESSED="PAGEUP_PRESSED",t.PAGEDOWN_PRESSED="PAGEDOWN_PRESSED",t.TOGGLE_SELECTION_CURRENT_ROW="TOGGLE_SELECTION_CURRENT_ROW",t.DUMMY_ACTION="DUMMY_ACTION",e};return t(e),e.applyConstants=t,e}angular.module("fnfConstants",[]).factory("constantsService",e),e.$inject=[]}(),function(){"use strict";function e(e){e.info("dataService...");var t={initial:null,activePanelIndex:0,tools:[],folderHistory:[],folderLatestAdded:[],favs:[],shortcutsconfig:null,color:null},n=function(){return t},i=function(n){t.initial=n,e.info("dataService.setInitialLoad() / data",t),e.info("dataService.setInitialLoad() / data.initial",t.initial)},o={};return o.getData=n,o.setInitialLoad=i,o}angular.module("app").service("dataService",e),e.$inject=["$log"]}(),function(){"use strict";function e(e,t){var n={},i={},o=function(t,n){e(function(){a(t,n)})},a=function(e,o){o||(o=e);var a=n[e];if(a)for(var r=0;r<a.length;r++)a[r](o,e);else t.warn('notifyService: emit called for key "'+e+'" but no listeners registered yet.');return i},r=function(e,o){return e?(n[e]||(n[e]=[]),-1===n[e].indexOf(o)&&n[e].push(o),i):t.error("Error: NotifyService.addListener(key, listener): key is undefined!",e)},l=function(e,t){if(!n[e])return i;var o=n[e].indexOf(t);return o>-1&&n[e].splice(o,1),i},c=function(e){return n[e]=[],i},s=function(e){for(var t in n)if(n.hasOwnProperty(t)){var o=n[t].indexOf(e);o>-1&&n[t].splice(o,1)}return i};return i.$emit=o,i.emit=a,i.addListener=r,i.removeListener=l,i.removeListenerForAll=s,i.removeListenersForKey=c,i}angular.module("notify",[]).factory("notifyService",e),e.$inject=["$timeout","$log"]}(),function(){"use strict";function e(e,t,n,i){i.info("appKeyboardService...");var o={},a=e.register_combo,r=e.unregister_combo,l=[],c=/ [a-z0-9]+$/,s=function(e){for(var n=0;n<e.length;n++)!function(e){var n=this,i=e.shortcut.match(c),o={keys:e.shortcut,on_keydown:null,on_keyup:function(n){return t.emit(e.id),!1},on_release:null,"this":n,prevent_default:!i,prevent_repeat:!1,is_unordered:!1,is_counting:!1,is_exclusive:!i,is_solitary:!1,is_sequence:!1};l.push(o),a(o)}(e[n])},d=function(e){for(var t=0;t<e.length;t++)e[t].shortcut&&!function(e){var t=this,i=e.shortcut.match(c),o={keys:e.shortcut,on_keydown:null,on_keyup:function(t){return n.runTool(e),!1},on_release:null,"this":t,prevent_default:!i,prevent_repeat:!1,is_unordered:!1,is_counting:!1,is_exclusive:!i,is_solitary:!1,is_sequence:!1};l.push(o),a(o)}(e[t])},u=function(){for(var e=0;e<l.length;e++)r(l[e].keys)},f=function(){for(var e=0;e<l.length;e++)a(l[e])};return o.iam="appKeyboardService",o.unregisterMainShortcuts=u,o.reregisterMainShortcuts=f,o.addToolShortcuts=d,o.addMainMenuShortcuts=s,o.register_combo=a,o.unregister_combo=r,o}angular.module("app.keyboard",[]).factory("appKeyboardService",e),e.$inject=["keyboardService","notifyService","mainService","$log"]}(),function(){"use strict";function e(){var e=new window.keypress.Listener,t={};return t.simple_combo=e.simple_combo.bind(e),t.counting_combo=function(t,n){e.counting_combo(t,n)},t.sequence_combo=function(t,n){e.sequence_combo(t,n)},t.register_combo=function(t){e.register_combo(t)},t.register_many=function(t){e.register_many(t)},t.unregister_combo=function(t){e.unregister_combo(t)},t.unregister_many=function(t){e.unregister_many(t)},t.get_registered_combos=function(){return e.get_registered_combos()},t.reset=function(){e.reset()},t.listen=function(){e.listen()},t.stop_listening=function(){e.stop_listening()},t.destroy=function(){e.destroy()},t}angular.module("keyboard",[]).factory("keyboardService",e),e.$inject=[]}(),function(){"use strict";function e(e,t,n,i,o,a,r,l,c,s,d,u){var f={},g=a.openFile,p=a.loadDirectory,m=t.getGridModelCount,v=t.getGridApi,b=n.getActiveTab,h=a.setFolder,S=c.getShortcutIds,E=l.addListener,_=i.setInitialLoad,D=e.initialLoad,O=s.getDefaultTools,y=i.getData(),C=function(e,n){t.autoFocusedCell(y.activePanelIndex)},A=function(){D(function(e){if(e.error)return u.error(e.error);var t,n=[];console.info("data.data",e.data),console.info(e.data.tools);var i=e.data.tools;if(i&&i.replaceDefaults)n=i.tools;else if(n=O({osx:e.data.osx,linux:e.data.linux,windows:e.data.windows}),i)for(var a=0;a<i.tools.length;a++){var l=i.tools[a];n.push(l)}if(angular.extend(y.tools,n),e.data.shortcutsconfig&&(y.shortcutsconfig=e.data.shortcutsconfig,c.setMapping(e.data.shortcutsconfig.mapping)),y.availableStyles=e.data.availableStyles,e.data.color&&(y.color=e.data.color,y.color.colors))for(var s in y.color.colors)document.documentElement.style.setProperty(s,y.color.colors[s]);if(e.data.config){var f=e.data.config;angular.extend(y,f)}else y.activePanelIndex=0;_(e.data);var D=e.data.startingPoints,A=S();for(t=0;t<A.length;t++)E(A[t],r.action);u.info(" _data.tools",y.tools),o.addToolShortcuts(y.tools),d(function(){y.configLoaded=!0;for(var t=0;t<m();t++)!function(t){if(e.data.config){var n=b(t).path;p(t,{path:n},C)}else{var i=(t+D.length-1)%D.length;p(t,{path:D[i]},C)}v(t).addEventListener("rowDoubleClicked",function(e){var n=e.data.dir+"/"+e.data.base;e.data.isDir?h(t,n):g(n)})}(t)})})};return f.init=A,f.iam="initService",f}angular.module("initService",[]).factory("initService",e),e.$inject=["fileSocketService","gridService","tabService","dataService","appKeyboardService","mainService","actionService","notifyService","shortcutService","toolService","$timeout","$log"]}(),function(){"use strict";function e(e,t){t.info("clipboardService...");var n={},i=e.getSelectedFiles,o=e.getFirstPossibleRow,a=function(){var e=i();if(0===e.length){var t=o();t&&e.push(t)}for(var n=[],a=0;a<e.length;a++)n[n.length]=e[a].base;return n.join("\n")},r=function(){var e=i();if(0===e.length){var t=o();t&&e.push(t)}for(var n=[],a=0;a<e.length;a++)n[n.length]=e[a].dir+"/"+e[a].base;return n.join("\n")},l=function(){f(a())},c=function(){f(JSON.stringify(a().split("\n"),null,2))},s=function(){f(r())},d=function(){f(JSON.stringify(r().split("\n"),null,2))},u=function(e){},f=function(e,n){if(t.info(e),n||(n=u),window.clipboardData)return window.clipboardData.setData("text",e),n(!0);if(document.execCommand&&document.queryCommandSupported("copy")){var i=g();i.text(e),i.focus().select();var o=document.execCommand("copy");if(i.remove(),o)return n(!0)}},g=function(){var e=angular.element('<textarea id="clipboard"></textarea>').css({width:0,height:0,opacity:0,position:"absolute",zindex:99123});return angular.element("body").append(e),e};return n.copyFullNames=s,n.copyNames=l,n.copyFullNamesAsJson=d,n.copyNamesAsJson=c,n.copy=f,n.iam="clipboardService",n}angular.module("clipboardService",[]).factory("clipboardService",e),e.$inject=["mainService","$log"]}(),function(){"use strict";function e(e,t){t.info("actionLabelMappingService...");var n={};n[e.COPY_2_CLIPBOARD_FULLNAMES]="Copy full names to clipboard",n[e.COPY_2_CLIPBOARD_NAMES]="Copy names to clipboard",n[e.COPY_2_CLIPBOARD_FULLNAMES_AS_JSON]="Copy full names to clipboard as JSON",n[e.COPY_2_CLIPBOARD_NAMES_AS_JSON]="Copy names to clipboard as JSON",n[e.OPEN_COPY_DLG]="Copy",n[e.OPEN_MOVE_DLG]="Move",n[e.OPEN_MKDIR_DLG]="Create Dir",n[e.OPEN_DELETE_DLG]="Delete",n[e.SELECT_LEFT_PANEL]="Left Panel",n[e.SELECT_RIGHT_PANEL]="Right Panel",n[e.TOGGLE_PANEL]="Toggle Panel",n[e.ADD_NEW_TAB]="Add Tab",n[e.REMOVE_TAB]="Remove Tab",n[e.OPEN_GOTO_ANYTHING_DLG]="Go to anything...",n[e.SAVE_CONFIG]="Save Config",n[e.OPEN_GROUPFILES_DLG]="Group Files...",n[e.OPEN_CHDIR_DLG]="Change Dir...",n[e.OPEN_FIND_DUBLICATES_DLG]="Find Dublicates...",n[e.OPEN_MULTIRENAME_DLG]="Multi Rename...",n[e.OPEN_RENAME_DLG]="Rename...",n[e.OPEN_DELETE_EMPTY_FOLDERS_DLG]="Delete Empty Folders...",n[e.OPEN_FIND_DLG]="Find...",n[e.RELOAD_DIR]="Reload...",n[e.OPEN_SELECT_DLG]="Enhance Selection...",n[e.SELECT_ALL]="Select All",n[e.SELECT_ALL]="Select All",n[e.OPEN_DESELECT_DLG]="Reduce Selection...",n[e.DESELECT_ALL]="Deselect All",n[e.TOGGLE_SELECTION]="Toggle Selection",n[e.NAVIGATE_LEVEL_DOWN]="Parent Dir",n[e.NAVIGATE_BACK]="History Back",n[e.NAVIGATE_LEVEL_DOWN]="Parent Dir",n[e.NAVIGATE_BACK]="History Back";var i=function(e){var i=n[e];return i||t.warn("No label for "+e),i};return{getLabelForAction:i}}angular.module("actionLabelMappingService",[]).factory("actionLabelMappingService",e),e.$inject=["constantsService","$log"]}(),function(){"use strict";function e(e,t,n){var i=[],o=t.getLabelForAction,a=function(){for(var e=[],t=0;t<i.length;t++)e.push(i[t].id);return e},r=function(e){for(var t=0;t<i.length;t++){var n=i[t];if(n.id===e)return n.shortcut}return null},l=function(e){return e?"<kbd>"+e.split(" ").join("</kbd> <kbd>")+"</kbd>":""},c=function(e){var t=r(e);return s(t)},s=function(e){return e?e.toUpperCase().replace(/_/g," ").replace(/SUBTRACT/g,"-").replace(/MULTIPLY/g,"*").replace(/CMD/g,"&#x2318;").replace(/ENTER/g,"&#x23CE;").replace(/RETURN/g,"&#x23CE;").replace(/CTRL/g,"⌃").replace(/CONTROL/g,"&#x2303;").replace(/OPTION/g,"&#x2325;").replace(/SHIFT/g,"&#8679;").replace(/ADD/g,"+").replace(/NUM/g,"num").replace(/ALT/g,"alt"):void 0},d=function(e){var t=r(e);if(t)return t.toUpperCase().replace(/ /g,"-").replace(/\+/g,"-").replace(/CTRL/g,"Ctrl").replace(/CMD/g,"cmd").replace(/ALT/g,"Alt").replace(/SHIFT/g,"Shift")},u=function(){n.info("ShortcutService> init."),e.addMainMenuShortcuts(i)},f=function(){return i},g=function(e){i=e,u()};return{kbdHtml:l,setMapping:g,getMapping:f,getShortcutIds:a,getShortcutByActionId:d,getLabelForAction:o,printShortcutByActionId:c,printShortcut:s}}angular.module("shortcutService",[]).factory("shortcutService",e),e.$inject=["appKeyboardService","actionLabelMappingService","$log"]}(),function(){"use strict";function e(e,t){t.info("dialogActionMappingService...");var n={};e.applyConstants(n);var i={};i[n.OPEN_DROP_DLG]={id:"fnf-drop-dialog",url:"/fnf/drop/dialog.html"},i[n.OPEN_CHDIR_DLG]={id:"fnf-chdir-dialog",url:"/fnf/commands/chdir/dialog.html"},i[n.OPEN_JOB_QUEUE_DLG]={id:"fnf-jobqueue-dialog",url:"/fnf/action/jobqueue/dialog.html"},i[n.OPEN_GOTO_ANYTHING_DLG]={id:"fnf-gotoanything-dialog",url:"/fnf/action/gotoanything/dialog.html",nocache:!0},i[n.OPEN_MULTIRENAME_DLG]={id:"fnf-multirename-dialog",url:"/fnf/commands/multirename/dialog.html"},i[n.OPEN_RENAME_DLG]={id:"fnf-rename-dialog",url:"/fnf/commands/rename/dialog.html",nocache:!0},i[n.OPEN_DELETE_EMPTY_FOLDERS_DLG]={id:"fnf-delete-empty-folders-dialog",url:"/fnf/commands/deleteemptyfolders/dialog.html",nocache:!0},i[n.OPEN_FIND_DLG]={id:"fnf-find-action-dialog",url:"/fnf/commands/find/dialog.html",nocache:!0},i[n.OPEN_DELETE_DLG]={id:"fnf-delete-action-dialog",url:"/fnf/commands/delete/dialog.html",nocache:!0},i[n.OPEN_COPY_DLG]={id:"fnf-copy-action-dialog",url:"/fnf/commands/copy/dialog.html",nocache:!0},i[n.OPEN_MOVE_DLG]={id:"fnf-move-action-dialog",url:"/fnf/commands/move/dialog.html",nocache:!0},i[n.OPEN_MKDIR_DLG]={id:"fnf-mkdir-action-dialog",url:"/fnf/commands/mkdir/dialog.html",nocache:!0},i[n.OPEN_FIND_DUBLICATES_DLG]={id:"fnf-finddublicates-dialog",url:"/fnf/commands/finddublicates/dialog.html"},i[n.OPEN_GROUPFILES_DLG]={id:"fnf-groupfiles-dialog",url:"/fnf/commands/groupfiles/dialog.html",nocache:!0},i[n.OPEN_SELECT_DLG]={id:"fnf-selection-dialog",url:"/fnf/commands/select/selectdialog.html"},i[n.OPEN_DESELECT_DLG]={id:"fnf-deselection-dialog",url:"/fnf/commands/select/deselectdialog.html"};var o=function(e){return i[e]};return n.iam="dialogActionMappingService",n.getDialogMetaData=o,n}angular.module("dialogActionMappingService",[]).factory("dialogActionMappingService",e),e.$inject=["constantsService","$log"]}(),function(){"use strict";function e(e,t,n,i,o,a){var r={},l=function(){var e="function"==typeof Date.now?Date.now():(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:7&n|8).toString(16)});return t},c=function(e,t){if(t=angular.isString(e)?{url:e}:e,t||(t={backdrop:"static"}),t.id||(t.id="dialog-"+l()),!t.url)throw Error("DialogService.open(...): url is missing!");var n=s(t),a={keys:"control enter",on_keydown:function(){1===n.find("[fnf-click-on-ctrl-enter]").length?n.find("[fnf-click-on-ctrl-enter]").click():1===n.find(".btn-primary").length&&n.find(".btn-primary").click()},prevent_default:!0,is_exclusive:!0};return n.on("show.bs.modal",function(){t.onShow&&t.onShow(n)}),n.on("shown.bs.modal",function(){$(":input[autofocus]",this).focus(),t.onShown&&t.onShown(n),i.unregisterMainShortcuts(),i.register_combo(a),n.find("[fnf-click-on-ctrl-enter]").attr("title","Press Ctrl-Enter"),n.find("[data-dismiss]").attr("title","Press ESC")}),n.on("hidden.bs.modal",function(){t.onHidden&&t.onHidden(n),o.info("modal closed.",t.id),i.unregister_combo(a.keys),i.reregisterMainShortcuts(),t.nocache&&n.parent().remove()}),n.modal(t),n},s=function(i){var a=i.id,l=i.url,c=i.nocache?!0:!1;if(!c&&r[a])return o.info("from map ",a),r[a];$("body").append('<div id="'+a+'"></div>');var s=$("#"+a),d=t.get(l);s.append(d);var u=s.html(d).scope();n(s)(u||e);var f=$("#"+a+" div:first");return r[a]=f,f},d={};return d.iam="dialogService",d.openAndCompile=c,d}angular.module("dialogService",[]).factory("dialogService",e),e.$inject=["$rootScope","$templateCache","$compile","appKeyboardService","$log","$timeout"]}(),function(){"use strict";function e(e,t,n,i,o,a,r,l,c,s,d,u,f,g){var p={},m=(e.getData(),l.loadDirectory),v=c.selectPanel,b=c.selectLeftPanel,h=c.selectRightPanel,S=c.togglePanel,E=s.getTargetPanelIndex,_=s.getTargetDir,D=s.getSourcePanelIndex,O=s.getSourceDir,y=i.getDialogMetaData,C=n.openAndCompile,A=a.selectAll,N=a.deselectAll,T=a.toggleSelection,L=o.saveconfig,x=s.addNewTabOnActivePanel,P=s.removeTabOnActivePanel,k=s.navigateBack,I=s.navigateDown,w=s.onEnterPressed,R=d.calcSumsForSelectedRow,$=s.onHomePressed,F=s.onEndPressed,M=s.onPageUpPressed,G=s.onPageDownPressed,U=s.toggleCurrentRow,j=u.copyNames,H=u.copyFullNames,z=u.copyNamesAsJson,B=u.copyFullNamesAsJson;t.applyConstants(p);var W=function(e){var t=y(e);return t?(t.onShow=function(){r.$emit(e+"_ON_SHOW",t.id)},t.onShown=function(){r.$emit(e+"_ON_SHOWN",t.id)},t.onHidden=function(){r.$emit(e+"_ON_HIDDEN",t.id)},g.info("ActionService.openDialog()",e),void C(t)):g.warn("ActionService.openDialog("+e+'): No dialog data found for "'+e+'"!')},K=function(){f(function(){var e=function(){v(t)},t=D();m(E(),{path:_(),nocache:!0},e),m(t,{path:O(),nocache:!0},e)})},V=function(e){return e===p.COPY_2_CLIPBOARD_FULLNAMES?H():e===p.COPY_2_CLIPBOARD_NAMES?j():e===p.COPY_2_CLIPBOARD_FULLNAMES_AS_JSON?B():e===p.COPY_2_CLIPBOARD_NAMES_AS_JSON?z():e===p.TOGGLE_SELECTION_CURRENT_ROW?U():e===p.SPACE_PRESSED?R():e===p.ENTER_PRESSED?w():e===p.HOME_PRESSED?$():e===p.END_PRESSED?F():e===p.PAGEUP_PRESSED?M():e===p.PAGEDOWN_PRESSED?G():e===p.RELOAD_DIR?K():e===p.TOGGLE_PANEL?S():e===p.SELECT_RIGHT_PANEL?h():e===p.SELECT_LEFT_PANEL?b():e===p.SAVE_CONFIG?L():e===p.SELECT_ALL?A():e===p.DESELECT_ALL?N():e===p.TOGGLE_SELECTION?T():e===p.ADD_NEW_TAB?x():e===p.REMOVE_TAB?P():e===p.NAVIGATE_BACK?k():e===p.NAVIGATE_LEVEL_DOWN?I():0===e.indexOf("OPEN_")?W(e):void("DUMMY_ACTION"!==e&&g.warn("No action found for: ",e))};return p.action=V,p.iam="actionService",p}angular.module("actionService",[]).factory("actionService",e),e.$inject=["dataService","constantsService","dialogService","dialogActionMappingService","configService","selectionService","notifyService","folderService","tabService","mainService","deepSumSizeService","clipboardService","$timeout","$log"]}(),function(){"use strict";function e(e,t){var n=0,i=function(n,i){var o={},a=function(){return n},r=function(o){var a=n.action.toLowerCase();n.id=i;var r=a+n.id;t.info("Executor.executing ",r),e.on(r,function(n){e.removeListener(r),t.info("Executor.done      ",r),o(n.error,n.events)}),e.emit(a,n)};return o.execute=r,o.getAction=a,o},o=function(e){return new i(e,n++)},a={};return a.create=o,a}angular.module("executorFactory",[]).factory("executorFactory",e),e.$inject=["socketService","$log"]}(),function(){"use strict";function e(e,t,n,i){var o,a={},r=[],l=0,c=function(){r.push({status:a.QUEUE_STATUS_IDLE,actions:[],jobId:0,progress:{unfinished:0,finished:0,errors:0,"class":"text-muted",getInfoText:function(){return this.finished+" / "+(this.finished+this.unfinished)}}})},s=function(e){return g(e).status},d=function(e){return g(e).progress},u=function(){for(var e=0;e<r.length;e++){var t=r[e],i=t.progress;i.unfinished=0,i.finished=0,i.errors=0;for(var o=t.jobId,l=t.actions,c=0;c<l.length;c++){var s=l[c];s.jobId>=o&&(s.status===a.ACTION_STATUS_NEW||s.status===a.ACTION_STATUS_PENDING||s.status===a.ACTION_STATUS_PROCESSING?i.unfinished++:i.finished++,s.status===a.ACTION_STATUS_ERROR&&i.errors++)}i.finished>0&&0===i.unfinished?i["class"]="font-weight-bold text-success":i.unfinished>0?i["class"]="text-info":i.errors?i["class"]="font-weight-bold text-danger":i["class"]="text-muted"}n(f,16)},f=function(){},g=function(e){if(e||(e=0),e>r.length)throw new Error("Error: getQueue(queueIndex) queueIndex is "+e+" but queues.length is "+r.length+"!");return e===r.length&&c(),r[e]},p=function(e,t){var n=g(t);e.status=a.ACTION_STATUS_NEW,e.jobId=++l,n.actions.push(e),n.jobId=l,h()},m=function(e,t){l++;var n=g(t);n.jobId=l;for(var i=0;i<e.length;i++){var o=e[i];o.status=a.ACTION_STATUS_NEW,o.jobId=l,n.actions.push(o)}h()},v=function(){t.emit(a.REFRESH_JOB_QUEUE_TABLE,"")},b=function(){u(),o&&n.cancel(o),o=n(v,1111)},h=function(){u();for(var e=0;e<r.length;e++){var t=r[e];t.status===a.QUEUE_STATUS_IDLE&&S(t)}},S=function E(n){n||(n=g(0));for(var i=0;i<n.actions.length;i++){var o=n.actions[i];if(o.status===a.ACTION_STATUS_NEW){if(n.status=a.QUEUE_STATUS_RUNNING,o.status=a.ACTION_STATUS_PROCESSING,o.action!==a.ACTION_REFRESH_PANEL){var r=e.create(o);return void function(e){e.execute(function(i,o){if(i)n.status=a.QUEUE_STATUS_ERROR,e.getAction().status=a.ACTION_STATUS_ERROR;else{if(n.status=a.QUEUE_STATUS_IDLE,e.getAction().status=a.ACTION_STATUS_SUCCESS,!e.getAction().bulk&&o)for(var r=0;r<o.length;r++){var l=o[r];t.emit(l.event,l)}E(n)}b()})}(r)}o.status=a.ACTION_STATUS_SUCCESS,t.emit(a.ACTION_REFRESH_PANEL,{index:o.panelIndex}),b()}}n.status=a.QUEUE_STATUS_IDLE};return a.QUEUE_STATUS_IDLE="IDLE",a.QUEUE_STATUS_RUNNING="RUNNING",a.QUEUE_STATUS_ERROR="ERROR",a.ACTION_STATUS_NEW="NEW",a.ACTION_STATUS_PENDING="PENDING",a.ACTION_STATUS_PROCESSING="PROCESSING",a.ACTION_STATUS_ERROR="ERROR",a.ACTION_STATUS_WARNING="WARNING",a.ACTION_STATUS_SUCCESS="SUCCESS",a.ACTION_STATUS_ABORT="ABORT",a.ACTION_REFRESH_PANEL="REFRESH_PANEL",a.ACTION_MKDIR="MKDIR",a.ACTION_COPY="COPY",a.ACTION_MOVE="MOVE",a.ACTION_REMOVE="REMOVE",a.ACTION_DELEMPTY="DELEMPTY",a.ACTION_RENAME="RENAME",a.REFRESH_JOB_QUEUE_TABLE="REFRESH_JOB_QUEUE_TABLE",a.addAction=p,a.addActions=m,a.getQueue=g,a.getQueueStatus=s,a.next=S,a.getQueueProgress=d,a}angular.module("actionQueueService",[]).factory("actionQueueService",e),e.$inject=["executorFactory","notifyService","$timeout","$log"]}(),function(){"use strict";function e(e,t){t.info("JobQueueController...");var n=this;n.gridOptions=e.getGridOptions(),n.restartVisible=e.restartVisible,n.next=e.next,n.getQueueStatus=e.getQueueStatus}angular.module("JobQueueController",[]).controller("JobQueueController",e),e.$inject=["jobService","$log"]}(),function(){"use strict";function e(e){var t=function(){var t=function(e){if(!e)return"";if(!e.data)return"";var t=e.value.replace(e.data.ext,"");return"ERROR"===t?'<i class="text-danger"><i class="fa fa-exclamation-triangle"></i> '+t+"</i>":"SUCCESS"===t?'<i class="text-success"><i class="fa fa-check-circle-o"></i> '+t+"</i>":"PROCESSING"===t?'<i class="text-primary"><i class="fa fa-cogs"></i> '+t+"</i>":'<i class="fa fa-check-circle-o"></i> '+t},n=[{headerName:"",field:"id",width:60,sort:"desc",icons:e.ALPHA_ICONS},{headerName:"Job",field:"jobId",width:60,icons:e.ALPHA_ICONS},{headerName:"Status",field:"status",width:100,icons:e.TEXT_SORT_ICONS,cellRenderer:t},{headerName:"Action",field:"action",width:110,icons:e.TEXT_SORT_ICONS},{headerName:"Source",field:"src",width:500,icons:e.TEXT_SORT_ICONS,cellRenderer:e.fileCellRenderer},{headerName:"Target",field:"target",width:600,icons:e.TEXT_SORT_ICONS,cellRenderer:e.fileCellRenderer}],i=function(e){var t=e.rowIndex;$(".ag-row-focus",this.api.grid.gridPanel.eBodyContainer).removeClass("ag-row-focus"),$('.ag-row[row="'+t+'"]',this.api.grid.gridPanel.eBodyContainer).addClass("ag-row-focus")},o={headerHeight:30,rowHeight:23,columnDefs:n,rowSelection:"multiple",rowDeselection:!0,enableColResize:!0,enableSorting:!0,sortingOrder:["asc","desc"],icons:e.ICONS,onCellFocused:i};return o};return{getOptions:function(){return new t}}}angular.module("jobQueueGridOptionsFactory",[]).factory("jobQueueGridOptionsFactory",e),e.$inject=["gridiconService"]}(),function(){"use strict";function e(e,t,n,i,o){o.info("jobService...");var a=e.getOptions(),r=t.getQueue(0),l=t.next,c=t.getQueueStatus,s=function(){return c(0)===t.QUEUE_STATUS_ERROR};a.rowData=r.actions;var d=function(){return a},u=null,f=function(){null!==u&&i.cancel(u),u=i(g,1234)},g=function(){o.info("gridOptions",a),a.api&&(a.api.setRowData(r.actions),a.api.refreshView())};n.addListener(t.REFRESH_JOB_QUEUE_TABLE,f),g();var p={};return p.getQueueStatus=c,p.getGridOptions=d,p.next=l,p.restartVisible=s,p}angular.module("jobService",[]).factory("jobService",e),e.$inject=["jobQueueGridOptionsFactory","actionQueueService","notifyService","$timeout","$log"]}(),function(){"use strict";function e(e,t,n,i){i.info("GotoAnythingController...");var o=this;o.execute=function(){e.execute(o.selected)},o.selected=void 0,o.commands=e.getCommands()}angular.module("GotoAnythingController",[]).controller("GotoAnythingController",e),e.$inject=["gotoAnythingService","notifyService","$timeout","$log"]}(),function(){"use strict";function e(e,t,n,i,o,a,r){r.info("gotoAnythingService..."),e.put("uib/template/typeahead/typeahead-match.html",'<div tabindex="-1" ng-bind-html="match.label | uibTypeaheadHighlight:query"></div>'),e.put("uib/template/typeahead/typeahead-popup.html",'<ul class="list-group dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li class="list-group-item" ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index, $event)" role="option" id="{{::match.id}}">\n        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n');var l=function(e){e.tool?o.runTool(e.tool):e.item&&a.emit(e.item.id),r.info("Unknown object:",e)},c=[],s=function(){return c},d=function(e){for(var t=0;t<c.length;t++)if(c[t].label===e)return!0;return!1};!function(){var e,o=t.getMapping();for(e=0;e<o.length;e++){var a=o[e],r=n.getLabelForAction(a.id),l=a.shortcut;l||(l=""),r&&(d(r)||c.push({label:r,item:a}))}var s=i.getData().tools;for(e=0;e<s.length;e++)d(s[e].label)||c.push({label:s[e].label,tool:s[e]})}();var u={};return u.iam="gotoAnythingService",u.getCommands=s,u.execute=l,u}angular.module("gotoAnythingService",[]).factory("gotoAnythingService",e),e.$inject=["$templateCache","shortcutService","actionLabelMappingService","dataService","mainService","notifyService","$log"]}(),function(){"use strict";function e(e,t){t.info("shellActionService...");var n=function(n){t.info("shellActionService.execute()",n),e.emit("shell",n,function(e,n){e&&t.error(e)})},i={};return i.execute=n,i}angular.module("shellActionService",[]).factory("shellActionService",e),e.$inject=["socketService","$log"]}(),function(){"use strict";function e(e,t){t.info("openfileActionService...");var n=function(n){e.emit("open",n,function(e,n){e&&t.error(e)})},i={};return i.openFile=n,i}angular.module("openfileActionService",[]).factory("openfileActionService",e),e.$inject=["socketService","$log"]}(),function(){"use strict";function e(e,t,n){n.info("commandService...");var i=e.addActions,o=0,a=function(e,t,n,i,a){return{id:o++,panelIndex:i,action:e,src:t,target:n,status:g.ACTION_STATUS_NEW,bulk:a}},r=function(t){return a(e.ACTION_REFRESH_PANEL,"","",t,!1)},l=function(t){return a(e.ACTION_MKDIR,{},{dir:t.dir,base:t.base},t.panelIndex)},c=function(n){var i=n.src,o=n.srcPanelIndex;return n.bulk||t.emit("update",{event:"update",panelIndex:o,item:{dir:i.dir,base:i.base,status:"temp"}}),a(e.ACTION_REMOVE,i,null,o,n.bulk)},s=function(t){return a(e.ACTION_DELEMPTY,t.src,null,t.srcPanelIndex,!1)},d=function(n){var i=n.src,o=n.srcPanelIndex,r=n.target,l=n.targetPanelIndex;return n.bulk||void 0==l||t.emit("created",{event:"created",panelIndex:l,item:{dir:r.dir,base:r.base,status:"temp"}}),a(e.ACTION_COPY,i,r,o,n.bulk)},u=function(i){n.info("commandService.move()  !bulk: ",!i.bulk);var o=i.src,r=i.srcPanelIndex,l=i.target,c=i.targetPanelIndex;return i.bulk||(void 0!=r&&t.emit("update",{event:"update",panelIndex:r,item:{dir:o.dir,base:o.base,status:"temp"}}),void 0!=c&&t.emit("created",{event:"created",panelIndex:c,item:{dir:l.dir,base:l.base,status:"temp"}})),a(e.ACTION_MOVE,o,l,r,i.bulk)},f=function(i){n.info("commandService.move()  !bulk: ",!i.bulk);var o=i.src,r=i.srcPanelIndex,l=i.target;return i.bulk||void 0!=r&&t.emit("update",{event:"update",panelIndex:r,item:{dir:o.dir,base:o.base,status:"temp"}}),a(e.ACTION_RENAME,o,l,r,i.bulk)},g={};return g.BULK_LOWER_LIMIT=30,g.addActions=i,g.del=c,g.delempty=s,g.copy=d,g.move=u,g.rename=f,g.mkdir=l,g.refreshPanel=r,g}angular.module("commandService",[]).factory("commandService",e),e.$inject=["actionQueueService","notifyService","$log"]}(),function(){"use strict";function e(e,t,n,i){i.info("ChdirActionController...");var o=e.setFolder,a=this;a.gridOptions=e.getGridOptions(),a.running=!1,a.chdirClicked=function(){var e=s();e&&o(e.name)};var r,l=function(){var e=a.gridOptions.api.getSelectedRows();return e.length>0?e[0]:null},c=function(){var e=a.gridOptions.api.getFocusedCell();return e?e.node.data:null},s=function(){var e=l();if(e)return e;if(e=c())return e;var t=a.gridOptions.api.grid.gridOptions.rowData;return t&&t.length>0?t[0]:null},d=function(){a.running=!0,a.gridOptions.api.setRowData([]),a.gridOptions.api.addEventListener("rowDoubleClicked",function(e){o(e.data.name),$('button[data-dismiss="modal"]').click()});var t=[],l=Date.now();r=e.startWalking(function(e){e&&(e.end?n(function(){i.info("walk ended.",r),a.running=!1,a.gridOptions.api.setRowData(t)}):(t.push({name:e}),Date.now()-l>2e3&&(l=Date.now(),a.gridOptions.api.setRowData(t))))})};a.cancelWalk=function(){e.cancelWalk(r),a.running=!1},t.removeListenersForKey("OPEN_CHDIR_DLG_ON_SHOW").removeListenersForKey("OPEN_CHDIR_DLG_ON_SHOWN").removeListenersForKey("OPEN_CHDIR_DLG_ON_HIDDEN").addListener("OPEN_CHDIR_DLG_ON_SHOW",d).addListener("OPEN_CHDIR_DLG_ON_HIDDEN",a.cancelWalk)}angular.module("ChdirActionController",[]).controller("ChdirActionController",e),e.$inject=["chdirActionService","notifyService","$timeout","$log"]}(),function(){"use strict";function e(e,t,n,i){i.info("chdirActionService...");var o=e.getOptions,a=(t.getTargetDir,t.getSourceDir),r=0,l=n.on,c=n.removeListener,s=n.emit,d=function(e){i.info("cancelWalk()",e),s("walkfolder",{cancelled:!0,rid:e})},u=function(e){r++,i.info("startWalking()",r);var t="walkfolder"+r;return l(t,function(t){e&&e(t)}),s("walkfolder",{dir:a(),rid:r}),r},f=function(e){t.setFolder(t.getSourcePanelIndex(),e)},g={};return g.getGridOptions=o,g.startWalking=u,g.cancelWalk=d,g.removeListener=c,g.setFolder=f,g}angular.module("chdirActionService",[]).factory("chdirActionService",e),e.$inject=["chdirGridOptionsFactory","mainService","socketService","$log"]}(),function(){"use strict";function e(e){var t=function(){var t=[{headerName:"Directory",field:"name",width:1200,icons:e.TEXT_SORT_ICONS}],n=function(e){var t=e.rowIndex;$(".ag-row-focus",this.api.grid.gridPanel.eBodyContainer).removeClass("ag-row-focus"),$('.ag-row[row="'+t+'"]',this.api.grid.gridPanel.eBodyContainer).addClass("ag-row-focus")},i={quickFilterText:"",headerHeight:30,rowHeight:23,columnDefs:t,rowSelection:"single",rowDeselection:!0,enableColResize:!0,enableSorting:!0,icons:e.ICONS,onCellFocused:n};return i};return{getOptions:function(){return new t}}}angular.module("chdirGridOptionsFactory",[]).factory("chdirGridOptionsFactory",e),e.$inject=["gridiconService"]}(),function(){"use strict";function e(e,t){var n=0,i=e.on,o=e.removeListener,a=e.emit,r=function(){t.info("searchService init...")},l=function(e){a("search",{cancelled:!0,rid:e})},c=function(e,t){var r=e.pathes;r&&0!==r.length||t("Folder is missing",0,!0),n++;var l="search"+n;return i(l,function(e){e.base&&t(e,!1),e.end&&(o(l),t(null,!0))}),a("search",{filter:e,rid:n}),n},s={};return s.init=r,s.search=c,s.cancelSearch=l,s}angular.module("searchService",[]).factory("searchService",e),e.$inject=["socketService","$log"]}(),function(){"use strict";function e(e,t,n){
n.info("deleteActionService...");var i=e.getSelectedFilesAndFolders,o=e.getSourcePanelIndex,a=function(){for(var n=[],a=o(),r=i(),l=0;l<r.length;l++)n.push(t.del({bulk:r.length>t.BULK_LOWER_LIMIT,src:r[l],srcPanelIndex:a}));e.storeLastRowIndex(),n.push(t.refreshPanel(a)),t.addActions(n)},r={};return r.callDelete=a,r}angular.module("deleteActionService",[]).factory("deleteActionService",e),e.$inject=["mainService","commandService","$log"]}(),function(){"use strict";function e(e,t,n,i,o){o.info("DeleteActionController...");var a=this;a.sourceText="",a.okEnabled=!1,a.scanning=!1,a.sum=0,a.callDelete=function(){t.callDelete()};var r,l=function(e,t,n){i(function(){a.scanning=!n,a.sum=t,a.sourceText=e,a.okEnabled=!0})},c=function(){a.sourceText="",a.okEnabled=!1,a.scanning=!1,a.sum=0,r=e.walkSelected(l)},s=function(){e.cancelWalk(r)};n.removeListenersForKey("OPEN_DELETE_DLG_ON_SHOW").removeListenersForKey("OPEN_DELETE_DLG_ON_SHOWN").removeListenersForKey("OPEN_DELETE_DLG_ON_HIDDEN").addListener("OPEN_DELETE_DLG_ON_SHOW",c).addListener("OPEN_DELETE_DLG_ON_HIDDEN",s)}angular.module("DeleteActionController",[]).controller("DeleteActionController",e),e.$inject=["deepSelectionService","deleteActionService","notifyService","$timeout","$log"]}(),function(){"use strict";function e(e,t,n){n.info("deleteEmptyFoldersActionService...");var i=e.getSourcePanelIndex,o=function(e){var n=i();t.addActions([t.delempty({src:{dir:e,base:""},srcPanelIndex:n}),t.refreshPanel(n)])},a={};return a.callDeleteEmptyFolders=o,a}angular.module("deleteEmptyFoldersActionService",[]).factory("deleteEmptyFoldersActionService",e),e.$inject=["mainService","commandService","$log"]}(),function(){"use strict";function e(e,t,n,i){i.info("DeleteEmptyFoldersActionController...");var o=this;o.sourceText="",o.okEnabled=!1,o.callDeleteEmptyFolders=function(){e.callDeleteEmptyFolders(o.sourceText)};var a=function(){o.sourceText=t.getSourceDir(),o.okEnabled=!0};n.removeListenersForKey("OPEN_DELETE_EMPTY_FOLDERS_DLG_ON_SHOW").removeListenersForKey("OPEN_DELETE_EMPTY_FOLDERS_DLG_ON_SHOWN").removeListenersForKey("OPEN_DELETE_EMPTY_FOLDERS_DLG_ON_HIDDEN").addListener("OPEN_DELETE_EMPTY_FOLDERS_DLG_ON_SHOW",a)}angular.module("DeleteEmptyFoldersActionController",[]).controller("DeleteEmptyFoldersActionController",e),e.$inject=["deleteEmptyFoldersActionService","mainService","notifyService","$log"]}(),function(){"use strict";function e(e,t,n){n.info("copyActionService...");var i=e.getTargetDir,o=e.getSourcePanelIndex,a=e.getTargetPanelIndex,r=e.getPossibleTargetFolders,l=e.slash,c=e.getRowsForAction,s=function(e){var n,i,r,s=l(e),d=[],u=c(),f=o(),g=a();for(n=0;n<u.length;n++)i={dir:l(u[n].dir),base:u[n].base},r={dir:s,base:u[n].base},d.push(t.copy({bulk:u.length>t.BULK_LOWER_LIMIT,src:i,srcPanelIndex:f,target:r,targetPanelIndex:g}));d.push(t.refreshPanel(g)),t.addActions(d)},d={};return d.getTargetDir=i,d.getPossibleTargetFolders=r,d.getRowsForAction=c,d.copy=s,d}angular.module("copyActionService",[]).factory("copyActionService",e),e.$inject=["mainService","commandService","$log"]}(),function(){"use strict";function e(e,t,n,i,o){o.info("CopyActionController...");var a=this;a.getPossibleTargetFolders=t.getPossibleTargetFolders,a.targetDir=t.getTargetDir(),a.optionsVisible=!1,a.sourceText="",a.okEnabled=!1,a.scanning=!1,a.sum=0,a.toggleOptions=function(){a.optionsVisible=!a.optionsVisible},a.setTargetDir=function(e){a.targetDir=e},a.copy=function(){t.copy(a.targetDir)};var r,l=function(e,n,o){i(function(){a.scanning=!o,a.sum=n,a.sourceText=e,a.okEnabled=t.getRowsForAction()})},c=function(){a.okEnabled=!1,a.sourceText="",a.scanning=!1,a.sum=0,a.targetDir=t.getTargetDir(),r=e.walkSelected(l)},s=function(){e.cancelWalk(r)};n.removeListenersForKey("OPEN_COPY_DLG_ON_SHOW").removeListenersForKey("OPEN_COPY_DLG_ON_SHOWN").removeListenersForKey("OPEN_COPY_DLG_ON_HIDDEN").addListener("OPEN_COPY_DLG_ON_SHOW",c).addListener("OPEN_COPY_DLG_ON_HIDDEN",s)}angular.module("CopyActionController",[]).controller("CopyActionController",e),e.$inject=["deepSelectionService","copyActionService","notifyService","$timeout","$log"]}(),function(){"use strict";function e(e,t,n,i,o){o.info("groupfilesActionService...");var a=(e.getTargetDir,e.getSourceDir,e.getSourcePanelIndex),r=e.getTargetPanelIndex,l=e.getSelectedFilesAndFolders,c=[],s=[{headerName:"No",field:"id",width:60,icons:t.ALPHA_ICONS},{headerName:"Source",field:"base",width:300,icons:t.TEXT_SORT_ICONS},{headerName:"Group",field:"dir",width:200,sort:"asc",icons:t.TEXT_SORT_ICONS},{headerName:"Target",field:"target",width:800,icons:t.TEXT_SORT_ICONS,cellRenderer:t.fileCellRenderer}],d={rowData:c,headerHeight:30,rowHeight:23,columnDefs:s,enableColResize:!0,enableSorting:!0,sortingOrder:["asc","desc"],icons:t.ICONS},u={gridOptions:d,modus:"runnig_number",newFolder:"",useSsourceDir:!1,groupCount:0,minsize:"2",ignoreBrackets:!0,okEnabled:!0,minsizes:[{value:"0",label:"none"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"10",label:"10"}],modes:[{value:"runnig_number",label:"Running number"},{value:"new_folder",label:"New folder (manually)"},{value:"minus_separator",label:"Minus separator"},{value:"first_word",label:"First word"},{value:"first_letter",label:"First letter"},{value:"first_letter_lower",label:"First letter lowercase"},{value:"first_letter_upper",label:"First letter uppercase"},{value:"two_letters",label:"Two letters"},{value:"two_letters_lower",label:"Two letters lowercase"},{value:"two_letters_upper",label:"Two letters uppercase"}]},f=function(){return u},g=function(e){var t=n.updateTableModel(e,l());return d.api.setRowData(t.rows),c=t.rows,t.groupCount},p=function(){var t,n,o=[],l=a(),s=r();for(t=0;t<c.length;t++)n=c[t],o.push(i.move({bulk:c.length>i.BULK_LOWER_LIMIT,src:n.src,srcPanelIndex:l,target:n.target,targetPanelIndex:s}));o.push(i.refreshPanel(l)),o.push(i.refreshPanel(s)),e.storeLastRowIndex(),i.addActions(o)},m=function(){var t,n,o=[],l=a(),s=r();for(t=0;t<c.length;t++)n=c[t],o.push(i.copy({bulk:c.length>i.BULK_LOWER_LIMIT,src:n.src,srcPanelIndex:l,target:n.target,targetPanelIndex:s}));o.push(i.refreshPanel(s)),e.storeLastRowIndex(),i.addActions(o)},v={};return v.move=p,v.copy=m,v.getDialogData=f,v.updateTableModel=g,v}angular.module("groupfilesActionService",[]).factory("groupfilesActionService",e),e.$inject=["mainService","gridiconService","groupfilesTableService","commandService","$log"]}(),function(){"use strict";function e(e,t,n){n.info("GroupfilesActionController...");var i=this;i.data=e.getDialogData(),i.updateTableModel=function(){i.data.groupCount=e.updateTableModel({modus:i.data.modus,minsize:parseInt(i.data.minsize),ignoreBrackets:i.data.ignoreBrackets,newFolder:i.data.newFolder,useSsourceDir:i.data.useSsourceDir}),i.data.okEnabled=i.data.groupCount>0},i.move=e.move,i.copy=e.copy;var o=function(){n.info("init()..."),i.updateTableModel()};t.removeListenersForKey("OPEN_GROUPFILES_DLG_ON_SHOW").removeListenersForKey("OPEN_GROUPFILES_DLG_ON_SHOWN").removeListenersForKey("OPEN_GROUPFILES_DLG_ON_HIDDEN").addListener("OPEN_GROUPFILES_DLG_ON_SHOW",o)}angular.module("GroupfilesActionController",[]).controller("GroupfilesActionController",e),e.$inject=["groupfilesActionService","notifyService","$log"]}(),function(){"use strict";function e(e,t){t.info("groupfilesTableService...");var n=e.getTargetDir,i=e.getSourceDir,o=function(e,t){var o,a=[],r=[],l=e.useSsourceDir?i():n(),c=0,s=e.twoLetters,d=s?2:1;for(o=0;o<t.length;o++){var u=t[o],f=u.base;e.ignoreBrackets&&(f=f.replace(/\[[\w\d\s]+\]/g,"").replace(/\([\w\d\s]+\)/g,"")),f=f.replace(/(^[\s_-]+|[\s_-]+$)/g,"").substr(0,d),e.lower&&(f=f.toLowerCase()),e.upper&&(f=f.toUpperCase()),f&&(-1===r.indexOf(f)&&r.push(f),a.push({id:c++,base:u.base,src:u,dir:f,target:{dir:l+"/"+f,base:u.base}}))}return{groupCount:r.length,rows:a}},a=function(e,t){var o,a,r=[],l={},c=e.minsize,s=e.useSsourceDir?i():n(),d=0,u=0;for(o=0;o<t.length;o++){var f=t[o],g=f.base,p=null;e.ignoreBrackets&&(g=g.replace(/\[[^\]]+\]/g,"").replace(/\([^\)]+\)/g,"")),a=g.match(/(.+) - (.+)/),a?p=a[1]:(a=g.match(/(.+)-(.+)/),a&&(p=a[1])),p&&(p=p.replace(/(^[\.\s_-]+|[\.\s_-]+$)/g,""),l[p]||(l[p]=[]),l[p].push(f))}for(var m in l)if(l.hasOwnProperty(m)){var v=l[m];if(v.length>=c)for(d++,o=0;o<v.length;o++){var b=v[o];r.push({id:u++,base:b.base,src:b,dir:m,target:{dir:s+"/"+m,base:b.base}})}}return{groupCount:d,rows:r}},r=function(e,o){var a,r,l=[],c={},s=e.minsize,d=e.useSsourceDir?i():n(),u=0,f=0;for(a=0;a<o.length;a++){var g=o[a],p=g.base,m=null;e.ignoreBrackets&&(p=p.replace(/\[[^\]]+\]/g,"").replace(/\([^\)]+\)/g,"")),r=p.match(/(\w+)\W(.+)/),r&&(m=r[1]);try{m&&(m=m.replace(/(^[\.\s_-]+|[\.\s_-]+$)/g,""),c[m]||(c[m]=[]),c[m].push(g))}catch(v){t.warn(v),t.warn("m",r),t.warn('can set property "'+m+'"!')}}for(var b in c)if(c.hasOwnProperty(b)){var h=c[b];if(h.length>=s)for(u++,a=0;a<h.length;a++){var S=h[a];l.push({id:f++,base:S.base,src:S,dir:b,target:{dir:d+"/"+b,base:S.base}})}}return{groupCount:u,rows:l}},l=function(e,t){var o,a=[],r={},l=e.minsize,c=e.useSsourceDir?i():n(),s=0,d=0;for(o=0;o<t.length;o++){var u=t[o],f=u.base;e.ignoreBrackets&&(f=f.replace(/\[[^\]]+\]/g,"").replace(/\([^\)]+\)/g,""));var g=f.match(/(\d)+/g),p=f.match(/(\D)+/g);if(g&&g.length>=1&&p&&p.length>=2){var m=p[0];m=m.replace(/#/g,"").replace(/ Band /g,"").replace(/'/g,"").replace(/(^[\.\s_-]+|[\.\s_-]+$)/g,""),m&&(r[m]||(r[m]=[]),r[m].push(u))}}for(var v in r)if(r.hasOwnProperty(v)){var b=r[v];if(b.length>=l)for(s++,o=0;o<b.length;o++){var h=b[o];a.push({id:d++,base:h.base,src:h,dir:v,target:{dir:c+"/"+v,base:h.base}})}}return{groupCount:s,rows:a}},c=function(e,t){var o,a=[],r=e.useSsourceDir?i():n(),l=e.newFolder;if(l)for(o=0;o<t.length;o++){var c=t[o];a.push({id:o,base:c.base,src:c,dir:l,target:{dir:r+"/"+l,base:c.base}})}return{groupCount:1,rows:a}},s=function(e,n){return"new_folder"===e.modus?c(e,n):"runnig_number"===e.modus?l(e,n):"minus_separator"===e.modus?a(e,n):"first_word"===e.modus?r(e,n):e.modus.indexOf("letter")>-1?(e.lower=e.modus.indexOf("lower")>-1,e.upper=e.modus.indexOf("upper")>-1,e.twoLetters=e.modus.indexOf("two")>-1,o(e,n)):(t.warn("updateTableModel. Unknown mode:",e.modus),{groupCount:0,rows:[]})},d={};return d.updateTableModel=s,d}angular.module("groupfilesTableService",[]).factory("groupfilesTableService",e),e.$inject=["mainService","$log"]}(),function(){"use strict";function e(e,t,n){n.info("moveActionService...");var i=e.getTargetDir,o=e.slash,a=e.getPossibleTargetFolders,r=e.getRowsForAction,l=e.getSourcePanelIndex,c=e.getTargetPanelIndex,s=function(n){var i,a,s,d=o(n),u=[],f=r(),g=l(),p=c();for(i=0;i<f.length;i++)a={dir:o(f[i].dir),base:f[i].base},s={dir:d,base:f[i].isDir?"":f[i].base},u.push(t.move({bulk:f.length>t.BULK_LOWER_LIMIT,src:a,srcPanelIndex:g,target:s,targetPanelIndex:p}));u.push(t.refreshPanel(g)),u.push(t.refreshPanel(p)),e.storeLastRowIndex(),t.addActions(u)},d={};return d.getTargetDir=i,d.getPossibleTargetFolders=a,d.getRowsForAction=r,d.move=s,d}angular.module("moveActionService",[]).factory("moveActionService",e),e.$inject=["mainService","commandService","$log"]}(),function(){"use strict";function e(e,t,n,i,o){o.info("MoveActionController...");var a=this;a.getPossibleTargetFolders=t.getPossibleTargetFolders,a.targetDir=t.getTargetDir(),a.optionsVisible=!1,a.sourceText="",a.sourceFiles=[],a.okEnabled=!1,a.toggleOptions=function(){a.optionsVisible=!a.optionsVisible},a.move=function(){t.move(a.targetDir)},a.setTargetDir=function(e){a.targetDir=e};var r,l=function(e,n,o){i(function(){a.scanning=!o,a.sum=n,a.sourceText=e,a.okEnabled=t.getRowsForAction()})},c=function(){o.info("MoveActionController.init()... "+new Date),a.okEnabled=!1,a.sourceText="",a.targetDir=t.getTargetDir(),r=e.walkSelected(l)},s=function(){e.cancelWalk(r)};n.removeListenersForKey("OPEN_MOVE_DLG_ON_SHOW").removeListenersForKey("OPEN_MOVE_DLG_ON_SHOWN").removeListenersForKey("OPEN_MOVE_DLG_ON_HIDDEN").addListener("OPEN_MOVE_DLG_ON_SHOW",c).addListener("OPEN_MOVE_DLG_ON_HIDDEN",s)}angular.module("MoveActionController",[]).controller("MoveActionController",e),e.$inject=["deepSelectionService","moveActionService","notifyService","$timeout","$log"]}(),function(){"use strict";function e(e,t,n){n.info("mkdirActionService...");var i=e.getSourceDir,o=e.getSourcePanelIndex,a=function(){var t=e.getSelectedRows();if(t.length>0){var n=t[0].base;return n.indexOf(".")>-1?n.substring(0,n.lastIndexOf(".")):n}return""},r=function(e,n){var i=o();t.addActions([t.mkdir({dir:e,base:n,panelIndex:i}),t.refreshPanel(i)])},l={};return l.getInitName=a,l.getSourceDir=i,l.mkdir=r,l}angular.module("mkdirActionService",[]).factory("mkdirActionService",e),e.$inject=["mainService","commandService","$log"]}(),function(){"use strict";function e(e,t,n){n.info("MkdirActionController...");var i=this;i.name="",i.targetDir="",i.okEnabled=!1,i.setTargetDirTemp=function(e){i.targetDirTemp=e};var o=function(){n.info("MkdirActionController.init()... "+new Date),i.okEnabled=!1,i.targetDir=e.getSourceDir(),i.name=e.getInitName()};i.mkdir=function(){e.mkdir(i.targetDir,i.name)},t.removeListenersForKey("OPEN_MKDIR_DLG_ON_SHOW"),t.addListener("OPEN_MKDIR_DLG_ON_SHOW",o)}angular.module("MkdirActionController",[]).controller("MkdirActionController",e),e.$inject=["mkdirActionService","notifyService","$log"]}(),function(){"use strict";function e(e,t,n,i,o){o.info("findActionService...");var a,r={},l=e.getSourceDir,c=e.getSourcePanelIndex,s=e.getSelectedRows,d=n.addTab,u=t.search,f=i.loadDirectory,g=0,p={quickinput:""},m=[],v=function(){var e=p.quickinput;try{"123".match(e)}catch(t){return void o.warn("Could not parse pattern! "+e)}d(c(),function(t,n){g++,n.fileList=[],n.path="search_"+g,n.label="Search "+g,f(t,{fileList:n.fileList});var i=p.source,o=[];"all"===i?o=m:o.push(i);var r={pathes:o,pattern:e},l=Date.now();a=u(r,function(e,i){e&&e.base&&(n.fileList.push(e),n.running=!0,Date.now()-l>2e3&&(l=Date.now(),f(t,{fileList:n.fileList}))),i&&(n.running=!1,f(t,{fileList:n.fileList}))})})},b=function(){m=[],p.source=null,p.sources=[{value:l(),label:l()}];for(var e=s(),t=[],n=0;n<e.length;n++)if(e[n].isDir){var i=e[n].dir+"/"+e[n].base;t.push({value:i,label:i}),m.push(i),0===n&&(p.source=i)}return t.length>1&&(p.sources.push({value:"all",label:"All "+t.length+" selected folders"}),p.source="all"),null===p.source&&(p.source=p.sources[0].value),p.sources=p.sources.concat(t),p};return r.find=v,r.getDialogData=b,r}angular.module("findActionService",[]).factory("findActionService",e),e.$inject=["mainService","searchService","tabService","folderService","$log"]}(),function(){"use strict";function e(e,t,n){n.info("FindActionController...");var i=this;i.data={},i.setQuickinput=function(e){i.data.quickinput=e},i.ok=function(){e.find()};var o=function(){i.data=e.getDialogData(),n.info("FindActionController.init()...",i.data)};t.removeListenersForKey("OPEN_FIND_DLG_ON_SHOW").removeListenersForKey("OPEN_FIND_DLG_ON_SHOWN").removeListenersForKey("OPEN_FIND_DLG_ON_HIDDEN").addListener("OPEN_FIND_DLG_ON_SHOW",o)}angular.module("FindActionController",[]).controller("FindActionController",e),e.$inject=["findActionService","notifyService","$log"]}(),function(){"use strict";function e(e,t,n){n.info("renameActionService...");var i,o=e.getSourcePanelIndex,a=function(){return i=e.getFirstSelectedItem(),i?i.base:""},r=function(n){var a=o(),r=[];r.push(t.rename({bulk:!1,src:{dir:i.dir,base:i.base},srcPanelIndex:a,target:{dir:i.dir,base:n},targetPanelIndex:a})),r.push(t.refreshPanel(a)),e.storeLastRowIndex(),t.addActions(r)},l={};return l.getSourceText=a,l.rename=r,l}angular.module("renameActionService",[]).factory("renameActionService",e),e.$inject=["mainService","commandService","$log"]}(),function(){"use strict";function e(e,t,n){n.info("RenameActionController...");var i=this;i.optionsVisible=!1,i.sourceText="",i.targetText="",i.toggleOptions=function(){i.optionsVisible=!i.optionsVisible},i.rename=function(){e.rename(i.targetText)};var o=function(){n.info("RenameActionController.init()... "+new Date),i.okEnabled=!1,i.sourceText=e.getSourceText(),i.targetText=i.sourceText};t.removeListenersForKey("OPEN_RENAME_DLG_ON_SHOW").removeListenersForKey("OPEN_RENAME_DLG_ON_SHOWN").removeListenersForKey("OPEN_RENAME_DLG_ON_HIDDEN").addListener("OPEN_RENAME_DLG_ON_SHOW",o)}angular.module("RenameActionController",[]).controller("RenameActionController",e),e.$inject=["renameActionService","notifyService","$log"]}(),function(){"use strict";function e(e){var t={"text-muted":function(e){return"Untouched"===e.data.status},"bg-danger":function(e){return"Error"===e.data.status},"font-weight-bold":function(e){return"OK"===e.data.status&&"target"===e.colDef.field}},n=[{headerName:"No",field:"id",width:60,icons:e.ALPHA_ICONS,cellClassRules:t,sort:"asc"},{headerName:"Old Name",field:"source",width:400,icons:e.TEXT_SORT_ICONS,comparator:e.nameComparator,cellClassRules:t,cellRenderer:e.fileBaseCellRenderer},{headerName:"Info",field:"status",width:100,icons:e.TEXT_SORT_ICONS,cellClassRules:t,sort:"desc"},{headerName:"New Name",field:"target",width:500,icons:e.TEXT_SORT_ICONS,comparator:e.nameComparator,cellClassRules:t,cellRenderer:e.fileBaseCellRenderer}],i={rowData:[],headerHeight:30,rowHeight:23,columnDefs:n,enableColResize:!0,enableSorting:!0,sortingOrder:["asc","desc"],icons:e.ICONS},o={data:{okEnabled:!0,name:"[N].[E]",counterStart:"1",counterStep:"1",counterDigits:"4",replacementsChecked:!1,replacements:[{checked:!1,textFrom:"",textTo:"",regExpr:!1,ifFlag:!1,ifMatch:""},{checked:!1,textFrom:"",textTo:"",regExpr:!1,ifFlag:!1,ifMatch:""},{checked:!1,textFrom:"",textTo:"",regExpr:!1,ifFlag:!1,ifMatch:""},{checked:!1,textFrom:"",textTo:"",regExpr:!1,ifFlag:!1,ifMatch:""}],replaceGermanUmlauts:!1,replaceRiskyChars:!1,replaceSpaceToUnderscore:!1,replaceParentDir:!1,capitalizeMode:"none",gridOptions:i,makros:[{cat:"Reorder words",title:"prename name - title -> name, prename - title",example:'"Sebastian Fitzek - Das Joshua-Profil.epub" -> "Fitzek, Sebastian - Das Joshua-Profil.epub"',data:{textFrom:"/([^.\\s\\-]+)\\s([^.\\s-]+)\\s\\-\\s(.+)/g",regExpr:!0,textTo:"$2, $1 - $3",ifFlag:!0,ifMatch:"/([^,]) - ([^,]+)/"}},{cat:"Reorder words",title:"title - prename name -> name, prename - title",example:'"Das Joshua-Profil - Sebastian Fitzek.epub" -> "Fitzek, Sebastian - Das Joshua-Profil.epub"',data:{textFrom:"/(.+)\\s\\-\\s([^.\\s]+)\\s([^.]+)\\.([^.]+)/g",regExpr:!0,textTo:"$3, $2 - $1.$4",ifFlag:!0,ifMatch:"/([^,]) - ([^,]+)/"}},{cat:"Reorder words",title:"title - lastname, prename.suffix ->  lastname, prename - title.suffix",example:'"Das Joshua-Profil - Fitzek, Sebastian.epub" -> "Fitzek, Sebastian - Das Joshua-Profil.epub"',data:{textFrom:"/(.+)\\s\\-\\s([^.\\s]+)[\\s,]([^.]+)\\.([^.]+)/g",regExpr:!0,textTo:"$2, $3 - $1.$4",ifFlag:!0,ifMatch:"/([^,]) - ([^.\\s]+)[\\s,]([^.]+)/"}}]},options:{digits:[{value:1,label:"1"},{value:2,label:"02"},{value:3,label:"003"},{value:4,label:"0004"},{value:5,label:"00005"},{value:6,label:"000006"},{value:7,label:"0000007"},{value:8,label:"00000008"},{value:9,label:"000000009"},{value:10,label:"0000000010"}],starts:[{value:0,label:"0"},{value:1,label:"1"},{value:10,label:"10"},{value:100,label:"100"},{value:1e3,label:"1.000"},{value:1e4,label:"10.000"},{value:1e5,label:"100.000"},{value:1e6,label:"1000.000"}],steps:[{value:1,label:"1"},{value:5,label:"5"},{value:10,label:"10"},{value:20,label:"20"},{value:30,label:"50"},{value:100,label:"100"},{value:1e3,label:"1.000"}],capitalizeModes:[{value:"none",label:"none"},{value:"uppercase",label:"to uppercase"},{value:"lowercase",label:"to lowercase"},{value:"capitalize_first_letter",label:"capitalize first letter"},{value:"capitalize_words",label:"capitalize words"},{value:"chicago_manual_of_style",label:"chicago manual of style"}]}},a=function(){return o},r={};return r.getDialogData=a,r}angular.module("multirenameDataService",[]).factory("multirenameDataService",e),e.$inject=["gridiconService"]}(),function(){"use strict";function e(e,t,n,i){i.info("multirenameActionService...");var o=e.getSelectedFilesAndFolders,a=e.slash,r=e.getSourcePanelIndex,l=t.getDialogData,c=l(),s=function(e){for(var t="(a|an|and|as|at|but|by|en|for|if|in|of|on|or|the|to|v[.]?|via|vs[.]?)",n="([!\"#$%&'()*+,./:;<=>?@[\\\\\\]^_`{|}~-]*)",i=[],o=/[:.;?!] |(?: |^)["Ò]/g,a=0,r=function(e){return e.toLowerCase()},l=function(e){return e.substr(0,1).toUpperCase()+e.substr(1)};;){var c=o.exec(e);if(i.push(e.substring(a,c?c.index:e.length).replace(/\b([A-Za-z][a-z.'Õ]*)\b/g,function(e){return/[A-Za-z]\.[A-Za-z]/.test(e)?e:l(e)}).replace(RegExp("\\b"+t+"\\b","ig"),r).replace(RegExp("^"+n+t+"\\b","ig"),function(e,t,n){return t+l(n)}).replace(RegExp("\\b"+t+n+"$","ig"),l)),a=o.lastIndex,!c)break;i.push(c[0])}return i.join("").replace(/ V(s?)\. /gi," v$1. ").replace(/(['Õ])S\b/gi,"$1s").replace(/\b(AT&T|Q&A)\b/gi,function(e){return e.toUpperCase()})},d=function(e){return e.replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})},u=function _(e,t){return e.length<t?_("0"+e,t):e},f=function(e){return e.replace(/Â|À|Å|Ã/g,"A").replace(/â|à|å|ã/g,"a").replace(/Ä/g,"AE").replace(/ä/g,"ae").replace(/Ç/g,"C").replace(/ç/g,"c").replace(/É|Ê|È|Ë/g,"E").replace(/é|ê|è|ë/g,"e").replace(/Ó|Ô|Ò|Õ|Ø/g,"O").replace(/ó|ô|ò|õ/g,"o").replace(/Ö/g,"OE").replace(/ö/g,"oe").replace(/Š/g,"S").replace(/š/g,"s").replace(/ß/g,"ss").replace(/Ú|Û|Ù/g,"U").replace(/ú|û|ù/g,"u").replace(/Ü/g,"UE").replace(/ü/g,"ue").replace(/Ý|Ÿ/g,"Y").replace(/ý|ÿ/g,"y").replace(/Ž/g,"Z").replace(/ž/,"z").replace(/\u00d6/g,"Oe").replace(/\u00f6/g,"oe").replace(/\u00d6/g,"Ue").replace(/\u00fc/g,"ue").replace(/\u00c4/g,"Ae").replace(/\u00e4/g,"ae").replace(/\u00df/g,"ß").replace(/\u0099/g,"Oe").replace(/\u0094/g,"oe").replace(/\u009A/g,"Ue").replace(/\u0081/g,"ue").replace(/\u008e/g,"Ae").replace(/\u0084/g,"ae")},g=function(e,t,n){var i=t.name,o=e.base.split(".").pop(),r=e.base.substr(0,e.base.lastIndexOf(o)-1),l=a(e.dir).split("/").pop();"chicago_manual_of_style"===t.capitalizeMode?r=s(r):"lowercase"===t.capitalizeMode?r=r.toLowerCase():"uppercase"===t.capitalizeMode?r=r.toUpperCase():"capitalize_first_letter"===t.capitalizeMode?r=r.charAt(0).toUpperCase()+r.slice(1):"capitalize_words"===t.capitalizeMode&&(r=d(r)),t.replaceGermanUmlauts&&(r=f(r)),t.replaceRiskyChars&&(r=r.replace(/[^a-zA-Z0-9_ \[\]\(\)\-\.]/g,"")),t.replaceSpaceToUnderscore&&(r=r.replace(/ /g,"_")),t.replaceParentDir&&(r=r.replace(l,""));var c=i.replace(/\[N\]/g,r).replace(/\[E\]/g,o).replace(/\[P\]/g,l),g=c.match(/\[N(\d+)\-(\d+)\]/);if(g&&(c=c.replace(g[0],r.substring(parseInt(g[1]),parseInt(g[2])))),g=c.match(/\[N(\d+)\-\]/),g&&(c=c.replace(g[0],r.substring(parseInt(g[1])))),g=c.match(/\[N\-(\d+)\]/),g&&(c=c.replace(g[0],r.substring(0,parseInt(g[1])))),g=c.match(/\[E(\d+)\-(\d+)\]/),g&&(c=c.replace(g[0],o.substring(parseInt(g[1]),parseInt(g[2])))),g=c.match(/\[E(\d+)\-\]/),g&&(c=c.replace(g[0],o.substring(parseInt(g[1])))),g=c.match(/\[E\-(\d+)\]/),g&&(c=c.replace(g[0],o.substring(0,parseInt(g[1])))),g=c.match(/\[P(\d+)\-(\d+)\]/),g&&(c=c.replace(g[0],l.substring(parseInt(g[1]),parseInt(g[2])))),g=c.match(/\[P(\d+)\-\]/),g&&(c=c.replace(g[0],l.substring(parseInt(g[1])))),g=c.match(/\[P\-(\d+)\]/),g&&(c=c.replace(g[0],l.substring(0,parseInt(g[1])))),c.indexOf("[C]")>-1){var m=parseInt(t.counterStart),v=parseInt(t.counterStep),b=parseInt(t.counterDigits),h=m+n*v,S=u(""+h,b);c=c.replace(/\[C\]/g,S)}if(t.replacementsChecked)for(var E=0;E<t.replacements.length;E++)c=p(c,t.replacements[E]);return{dir:e.dir,base:c}},p=function(e,t){if(e=e.replace(/\s+/g," "),t.checked&&(!t.ifFlag||m(t.ifMatch,e))){var n=t.textFrom.match(new RegExp("^/(.*?)/([gimy]*)$"));if(n&&t.regExpr){var i=new RegExp(n[1],n[2]);e=e.replace(i,t.textTo).replace(/,,/g,",")}else e=e.replace(t.textFrom,t.textTo)}return e},m=function(e,t){var n=e.match(new RegExp("^/(.*?)/([gimy]*)$"));if(n){var i=new RegExp(n[1],n[2]);return t.match(i)}return t.indexOf(e)>-1},v=[],b=function(){var e=o();v=[];var t;for(t=0;t<e.length;t++){var n=e[t],i={base:n.base,dir:n.dir},a=g(i,c.data,t);v.push({id:t,source:i,target:a,changed:i.base!=a.base})}c.data.gridOptions.api.setRowData(v)},h=function(){var e,t;for(e=0;e<v.length;e++){var n=v[e];n.target=g(n.source,c.data,e),n.status=n.source.base!=n.target.base?"OK":"Untouched"}for(e=0;e<v.length;e++)for(t=e+1;t<v.length;t++)v[e].target.base===v[t].target.base&&v[e].target.dir===v[t].target.dir&&(v[e].status="Error",v[t].status="Error");c.data.gridOptions.api.setRowData(v);var i=[{colId:"status",sort:"asc"},{colId:"id",sort:"asc"}];c.data.gridOptions.api.setSortModel(i)},S=function(){for(var t=r(),i=[],o=0;o<v.length;o++){var a=v[o];"OK"===a.status&&i.push(n.rename({bulk:v.length>n.BULK_LOWER_LIMIT,src:a.source,srcPanelIndex:t,target:a.target}))}i.length>0&&n.addActions(i),e.storeLastRowIndex(),i.push(n.refreshPanel(t))},E={};return E.getDialogData=l,E.multirename=S,E.initTableModel=b,E.softUpdateTableModel=h,E}angular.module("multirenameActionService",[]).factory("multirenameActionService",e),e.$inject=["mainService","multirenameDataService","commandService","$log"]}(),function(){"use strict";function e(e,t,n,i){i.info("MultirenameActionController...");var o=this,a=e.getDialogData();o.data=a.data,o.options=a.options,o.multirename=e.multirename,o.softUpdateTableModel=e.softUpdateTableModel,o.makroSelected=function(e,t){e.checked=!0,e.textFrom=t.data.textFrom,e.textTo=t.data.textTo,e.regExpr=t.data.regExpr,e.ifFlag=t.data.ifFlag,e.ifMatch=t.data.ifMatch,o.softUpdateTableModel()};var r=function(){e.initTableModel()};t.removeListenersForKey("OPEN_MULTIRENAME_DLG_ON_SHOW").removeListenersForKey("OPEN_MULTIRENAME_DLG_ON_SHOWN").removeListenersForKey("OPEN_MULTIRENAME_DLG_ON_HIDDEN").addListener("OPEN_MULTIRENAME_DLG_ON_SHOW",r)}angular.module("MultirenameActionController",[]).controller("MultirenameActionController",e),e.$inject=["multirenameActionService","notifyService","$timeout","$log"]}(),function(){"use strict";function e(e,t,n,i){i.info("deepSelectionService...");var o=e.getSelectedCount,a=e.getFirstPossibleRow,r=e.getFirstSelectedItem,l=e.slash,c=e.getSelectedFiles,s=e.getSelectedAbsoluteFolders,d=e.getSelectedRows,u=e.fileSizeSI,f=0,g=t.on,p=t.removeListener,m=t.emit,v=function(e){i.info("deepSelectionService.cancelWalk",e),m("walk",{cancelled:!0,rid:e})},b=function(e){var t=o();if(i.info("deepSelectionService.walkSelected...",t),0===t){var l=a();if(l)return e(l.base,0,!0);e("nothing selected",0,!0)}else e(1===t?r().base:t+" files",1,!0);var v=d();if(v&&v.length){for(var b=c(),h=b.length,S=0,E=0;E<b.length;E++)S=+b[E].size;var _=s().length;f++;var D="walk"+f;g(D,function(t){t.base&&(t.isDir?_++:(h++,S+=t.size),e(h+" file"+(h>1?"s":"")+", "+_+" folder"+(_>1?"s":"")+" ("+u(S)+")",h+_,!1)),t.end&&(p(D),n(function(){_+h>1&&e(h+" file"+(h>1?"s":"")+", "+_+" folder"+(_>1?"s":"")+" ("+u(S)+")",h+_,!0)}))});var O={pathes:s(),rid:f};return m("walk",O),f}return null},h={};return h.slash=l,h.walkSelected=b,h.cancelWalk=v,h}angular.module("deepSelectionService",[]).factory("deepSelectionService",e),e.$inject=["mainService","socketService","$timeout","$log"]}(),function(){"use strict";function e(e,t,n,i){i.info("deepSumSizeService...");var o=e.getSourceGridApi,a=e.getFocusedRow,r=t.on,l=t.removeListener,c=t.emit,s=0,d=function(e){i.info("deepSumSizeService.cancelWalk",e),c("walksum",{cancelled:!0,rid:e})},u=function(){var e=a();if(e&&e.isDir){var t=o();if(e.size=0,e.isWalking)return;s++;var i="walksum"+s,d=Date.now();r(i,function(o){o.size&&(e.size=e.size+o.size,Date.now()-d>1e3&&(d=Date.now(),t.softRefreshView())),o.end&&(l(i),n(function(){e.isWalking=!1,t.softRefreshView()}))});var u={dir:e.dir+"/"+e.base,rid:s};return e.isWalking=!0,c("walksum",u),s}return null},f={};return f.calcSumsForSelectedRow=u,f.cancelWalk=d,f}angular.module("deepSumSizeService",[]).factory("deepSumSizeService",e),e.$inject=["mainService","socketService","$timeout","$log"]}(),function(){"use strict";function e(e,t,n,i){i.info("selectionService...");var o={},a=e.getSourceGridApi,r=function(e){var t=a();t.forEachNodeAfterFilter(function(n){if(!t.isNodeSelected(n)){var i=n.data;i.base.match(e)&&t.selectNode(n,!0)}})},l=function(e){var t=a();t.forEachNodeAfterFilter(function(n){if(t.isNodeSelected(n)){var i=n.data;i.base.match(e)&&t.deselectNode(n)}})},c=function(){var e=a();e.forEachNodeAfterFilter(function(t){e.isNodeSelected(t)||e.selectNode(t,!0)})},s=function(){var e=a();e.forEachNodeAfterFilter(function(t){e.isNodeSelected(t)&&e.deselectNode(t,!0)})},d=function(){var e=a();e.forEachNodeAfterFilter(function(t){e.isNodeSelected(t)?e.deselectNode(t,!0):e.selectNode(t,!0)})};return t.addListener(n.ENHANCE_SELECTION,r),t.addListener(n.REDUCE_SELECTION,l),o.selectAll=c,o.deselectAll=s,o.toggleSelection=d,o.iam="selectionService",o}angular.module("selectionService",[]).factory("selectionService",e),e.$inject=["mainService","notifyService","constantsService","$log"]}(),function(){"use strict";function e(e,t,n){var i=this;i.data={},i.data.quickinput=".",i.setQuickinput=function(e){i.data.quickinput=e},i.ok=function(){e.emit(t.ENHANCE_SELECTION,i.data.quickinput)}}angular.module("SelectionController",[]).controller("SelectionController",e),e.$inject=["notifyService","constantsService","$log"]}(),function(){"use strict";function e(e,t,n){var i=this;i.data={},i.data.quickinput="",i.setQuickinput=function(e){i.data.quickinput=e},i.ok=function(){e.emit(t.REDUCE_SELECTION,i.data.quickinput)}}angular.module("DeselectionController",[]).controller("DeselectionController",e),e.$inject=["notifyService","constantsService","$log"]}(),function(){"use strict";function e(e,t){var n=function(t,n){e.get("config/color/"+t+".json").then(n)},i={};return i.loadColorConfig=n,i}angular.module("colorService",[]).factory("colorService",e),e.$inject=["$http","$log"]}(),function(){"use strict";function e(e,t,n,i){var o={},a=function d(e,t){var n,i;if(angular.isArray(e))for(n=0;n<e.length;n++)d(e[n],t);else if(angular.isObject(e))for(i in e)if(e.hasOwnProperty(i)){var o=e[i];if(angular.isArray(o)||angular.isObject(o))d(o,t);else for(n=0;n<t.length;n++)i===t[n]&&delete e[i]}},r=function(e){var n=t.getData();return n.favs?n.favs.indexOf(e)>-1:!1},l=function(e){var n=t.getData();if(n.favs){var i=n.favs.indexOf(e);i>-1&&n.favs.splice(i,1),s()}},c=function(e){var n=t.getData();n.favs||(n.favs=[]);var i=n.favs.indexOf(e);i>-1&&n.favs.splice(i,1),n.favs.push(e),s()},s=function(){var i=t.getData();console.info(i.colorname);var r={activePanelIndex:e.getSourcePanelIndex(),tabs:JSON.parse(JSON.stringify(i.tabs)),folderLatestAdded:JSON.parse(JSON.stringify(i.folderLatestAdded)),favs:JSON.parse(JSON.stringify(i.favs)),colorname:i.colorname};return a(r.tabs,["$$hashKey"]),a(r.folderLatestAdded,["$$hashKey"]),a(r.favs,["$$hashKey"]),n.emit("saveconfig",{username:i.initial.username,data:r},function(e,t){}),o};return o.saveconfig=s,o.fav=c,o.unfav=l,o.isFav=r,o}angular.module("configService",[]).factory("configService",e),e.$inject=["mainService","dataService","socketService","$log"]}(),function(){"use strict";function e(e){var t={},n=function(t){e.info("getDefaultTools()",t);var n=[];return t.windows?n.push({id:"CMD_SHELL",label:"CMD Shell",shortcut:"control shift m",cmd:"$clidir\\cmd.bat",para:" $dir ",local:!0}):t.osx?(n.push({id:"EDIT_FILE",label:"Edit",shortcut:"control 4",cmd:"sublime",fileLimit:4,para:" $file ",local:!0}),n.push({id:"CMD_SHELL",label:"CMD Shell",shortcut:"control 0",cmd:"open -a Terminal ",para:" $dir ",local:!0}),n.push({id:"CMD_REVEAL_IN_FINDER",label:"Reveal in Finder",shortcut:"control shift f",cmd:"open ",para:" $dir ",local:!0})):t.linux,n};return t.getDefaultTools=n,t}angular.module("toolService",[]).factory("toolService",e),e.$inject=["$log"]}(),function(){"use strict";function e(e,t,n){n.info("GridPopupController...");var i=function(e,n){console.info(e);var i=e.target?e.target:e.srcElement,o=$("#gridPopup");$(i).click(),t(function(){o.addClass("open"),
new Tether({element:o,target:i,attachment:"middle left",targetAttachment:"middle left"})},111)};e.addListener("SHOW_POPUP",function(e,t){i(e.event,e.panelIndex)})}angular.module("app").controller("GridPopupController",e),e.$inject=["notifyService","$timeout","$log"]}(),angular.module("templates",[]).run(["$templateCache",function(e){e.put("/fnf/drop/dialog.html",'<div id="fnf-drop-action-dialog" ng-controller="DropActionController as dnd" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="gridModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">Drop (not implemented yet)</h4></div><div class="modal-body"><div class="horizontal layout"><div class="flex-1"><div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 alert" ng-class="{\'alert-success\':dnd.what===\'copy\'}" dropzone><br><br><br><br>Drop here for upload...<br><br><br><br></div></div></div></div></div><div class="modal-footer"><span drag-enter="dnd.select(\'cancel\')"><span drag-leave="dnd.clear(\'cancel\')"><button ng-class="{\'alert-success\':dnd.what===\'cancel\'}" drop="dnd.closeDlg()" type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button></span></span></div></div></div></div>'),e.put("/fnf/action/gotoanything/dialog.html",'<div class="fullheight modal fade from-left" id="gotoAnythingModal" data-backdrop="true" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-body fullbleed layout vertical fit" ng-controller="GotoAnythingController as g2a"><form class="layout horizontal xxxbg-inverse"><h4 class="pull-left" data-dismiss="modal">&nbsp;<i class="fa fa-arrow-circle-o-left"></i>&nbsp;&nbsp;</h4><input autofocus class="form-control flex" type="text" placeholder="Go to anything" ng-model="g2a.selected" ng-dblclick="g2a.selected= \'\'" typeahead-show-hint="true" uib-typeahead="cmd as cmd.label for cmd in g2a.commands | filter:$viewValue | limitTo:12"> <button fnf-click-on-ctrl-enter type="button" class="btn btn-primary pull-right" data-dismiss="modal" ng-click="g2a.execute()">Execute</button></form></div></div></div></div>'),e.put("/fnf/action/jobqueue/dialog.html",'<div class="fullscreen modal fade from-right" id="jobqueueModal" data-backdrop="false" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-body fullbleed layout vertical fit" ng-controller="JobQueueController as job"><div><button type="button" class="btn btn-link pull-right" data-dismiss="modal">&times;</button><div class="col-xs-11 col-sm-11 col-md-11 col-lg-11 col-xl-11 pull-left"><h4><i class="fa fa-arrow-circle-o-right" data-dismiss="modal"></i> Job Queue</h4></div></div><div id="fnf-jobs-grid-container" class="fnf-grid-container scroll flex horizontal layout fnf-active-panel"><div id="fnf-jobs-grid" class="fnf-grid" ag-grid="job.gridOptions"></div></div><div class="horizontal layout fnf-panel-bg"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"><button type="button" class="btn btn-secondary pull-left" ng-show="job.getQueueStatus()===\'ERROR\'" ng-click="job.next(0)">Restart Queue</button> <button type="button" class="btn btn-secondary pull-right" data-dismiss="modal">Close</button></div></div></div></div></div></div>'),e.put("/fnf/commands/chdir/dialog.html",'<div class="fullscreen modal fade from-right" data-backdrop="false" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-body fullbleed layout vertical fit" ng-controller="ChdirActionController as chdir"><div><button type="button" class="btn btn-link pull-right" data-dismiss="modal">&times;</button><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 col-xl-6 pull-left"><h4><i class="fa fa-arrow-circle-o-right" data-dismiss="modal"></i> &nbsp;Change Dir</h4></div><div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 col-xl-4 pull-left"><input autofocus class="form-control" type="text" placeholder="Filter" ng-dblclick="chdir.gridOptions.quickFilterText = \'\'" ng-model="chdir.gridOptions.quickFilterText"></div><div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 col-xl-1 pull-left"><h4 ng-show="chdir.running" ng-click="chdir.cancelWalk()"><i class="fa fa-circle-o-notch fa-spin pull-right"></i></h4></div></div><div id="fnf-chdir-grid-container" class="fnf-grid-container scroll flex horizontal layout fnf-active-panel"><div id="fnf-chdir-grid" class="fnf-grid" ag-grid="chdir.gridOptions"></div></div><div class="horizontal layout fnf-panel-bg"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"><button fnf-click-on-ctrl-enter type="button" class="btn btn-primary pull-right" data-dismiss="modal" ng-click="chdir.chdirClicked()">Chdir</button> <button type="button" class="btn btn-secondary pull-right" data-dismiss="modal">Close</button></div></div></div></div></div></div>'),e.put("/fnf/commands/copy/dialog.html",'<div id="fnf-copy-action-dialog" ng-controller="CopyActionController as copy" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="gridModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">Copy</h4></div><div class="modal-body"><fieldset class="form-group"><label>Source <span class="text-muted" ng-show="copy.scanning">&nbsp;&nbsp;&nbsp;scanning...{{copy.sum}} <i class="fa fa-refresh fa-spin"></i></span></label><input readonly="readonly" type="text" class="form-control" aria-label="Target folder" ng-model="copy.sourceText"></fieldset><fieldset class="form-group"><label>Target</label><div class="input-group"><input autofocus type="text" class="form-control" aria-label="Target folder" ng-model="copy.targetDir"><div class="input-group-btn"><button type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><div class="dropdown-menu dropdown-menu-right"><a ng-repeat="f in copy.getPossibleTargetFolders() track by $index" class="dropdown-item" href="#" ng-bind="f" ng-click="copy.setTargetDir(f)"></a></div></div></div></fieldset><div ng-show="copy.optionsVisible">TODO Options</div></div><div class="modal-footer"><button type="button" class="btn btn-secondary pull-left" ng-click="copy.toggleOptions()">Options</button> <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button> <button fnf-click-on-ctrl-enter type="button" class="btn btn-primary" data-dismiss="modal" ng-disabled="!copy.okEnabled" ng-click="copy.copy()">Copy</button></div></div></div></div>'),e.put("/fnf/commands/delete/dialog.html",'<div id="fnf-delete-action-dialog" ng-controller="DeleteActionController as del" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="gridModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">Delete</h4></div><div class="modal-body"><fieldset class="form-group"><label>Selected <span class="text-muted" ng-show="del.scanning">&nbsp;&nbsp;&nbsp;scanning...{{del.sum}} <i class="fa fa-refresh fa-spin"></i></span></label><input readonly="readonly" type="text" class="form-control" aria-label="Target folder" ng-model="del.sourceText"></fieldset></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button> <button fnf-click-on-ctrl-enter type="button" class="btn btn-primary" data-dismiss="modal" ng-disabled="!del.okEnabled" ng-click="del.callDelete()">Delete</button></div></div></div></div>'),e.put("/fnf/commands/deleteemptyfolders/dialog.html",'<div id="fnf-deleteemptyfolders-action-dialog" ng-controller="DeleteEmptyFoldersActionController as del" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="gridModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">Delete empty folders</h4></div><div class="modal-body"><fieldset class="form-group"><label>Start folder</label><input readonly="readonly" type="text" class="form-control" aria-label="Target folder" ng-model="del.sourceText"></fieldset></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button> <button fnf-click-on-ctrl-enter type="button" class="btn btn-primary" data-dismiss="modal" ng-disabled="!del.okEnabled" ng-click="del.callDeleteEmptyFolders()">Delete</button></div></div></div></div>'),e.put("/fnf/commands/find/dialog.html",'<div id="fnf-find-dialog" ng-controller="FindActionController as find" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="gridModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="gridModalLabel">Find</h4></div><div class="modal-body"><div><form class="form"><fieldset class="form-group col-sm-12"><label>Search in&nbsp;</label><select class="form-control c-select" ng-model="find.data.source"><option ng-repeat="i in find.data.sources" value="{{i.value}}" ng-bind="i.label"></option></select></fieldset><fieldset class="form-group col-sm-12"><label>Search for&nbsp;</label><div class="input-group"><input autofocus type="text" class="form-control" ng-model="find.data.quickinput" placeholder="pattern"> <a href="javascript:void(0)" class="input-group-addon dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></a><ul class="dropdown-menu"><li><a href="javascript:void(0)" ng-click="find.setQuickinput(\'.cbr$|.cbz$\')">.cbr$|.cbz$</a></li><li><a href="javascript:void(0)" ng-click="find.setQuickinput(\'.js(.){0,2}$\')">.jsp$</a></li><li><a href="javascript:void(0)" ng-click="find.setQuickinput(\'.epub$\')">.epub$</a></li><li><a href="javascript:void(0)" ng-click="find.setQuickinput(\'.jpg$|.jpeg$|.png$|.gif$|.bmp$\')">.</a></li></ul></div></fieldset></form><br><br>.</div></div><div class="modal-footer"><button class="btn btn-default" data-dismiss="modal" aria-hidden="true">Cancel</button> <button fnf-click-on-ctrl-enter data-dismiss="modal" aria-hidden="true" data-ng-click="find.ok();" class="btn btn-primary">Find</button></div></div></div></div>'),e.put("/fnf/commands/finddublicates/dialog.html",'<div class="fullscreen modal fade from-bottom" id="findDublicatesModal" data-backdrop="false" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-body fullbleed layout vertical fit"><div><button type="button" class="btn btn-link pull-right" data-dismiss="modal">&times;</button><div class="col-xs-11 col-sm-11 col-md-11 col-lg-11 col-xl-11 pull-left"><h4>Find dublicates</h4></div></div><div class="scroll flex horizontal layout"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 pull-left">Content...</div></div><div class="horizontal layout fnf-panel-bg"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"><button type="button" class="btn btn-secondary pull-right" data-dismiss="modal">Close</button></div></div></div></div></div></div>'),e.put("/fnf/commands/groupfiles/dialog.html",'<div id="fnf-groupfiles-action-dialog" class="fullscreen modal fade from-bottom" ng-controller="GroupfilesActionController as gf" data-backdrop="false" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-body fullbleed layout vertical fit"><div><button type="button" class="btn btn-link pull-right" data-dismiss="modal">&times;</button><div class="col-xs-11 col-sm-11 col-md-11 col-lg-11 col-xl-11 pull-left"><h4><i class="fa fa-arrow-circle-o-down" data-dismiss="modal"></i> Group files</h4></div></div><div><form class="form-inline"><fieldset class="form-group col-sm-3"><label>Mode&nbsp;</label><select autofocus class="form-control c-select" ng-model="gf.data.modus" ng-change="gf.updateTableModel()"><option ng-repeat="i in gf.data.modes" value="{{i.value}}" ng-bind="i.label"></option></select></fieldset><fieldset class="form-group col-sm-3" ng-show="gf.data.modus === \'new_folder\'"><input class="form-control" type="text" ng-model="gf.data.newFolder" ng-change="gf.updateTableModel()" placeholder="Folder Name"></fieldset><fieldset class="form-group col-sm-2" ng-show="gf.data.modus !== \'new_folder\'"><label><input class="form-control" type="checkbox" ng-model="gf.data.ignoreBrackets" ng-click="gf.updateTableModel()"> Ignore Brackets</label><select class="form-control invisible"></select></fieldset><fieldset class="form-group col-sm-2"><label><input class="form-control" type="checkbox" ng-model="gf.data.useSsourceDir" ng-click="gf.updateTableModel()"> Use Source Dir</label><select class="form-control invisible"></select></fieldset><fieldset ng-show="gf.data.modus===\'runnig_number\'" class="form-group col-sm-3"><label>Minimal group size&nbsp;</label><select class="form-control c-select" ng-model="gf.data.minsize" ng-change="gf.updateTableModel()"><option ng-repeat="i in gf.data.minsizes" value="{{i.value}}" ng-bind="i.label"></option></select></fieldset><fieldset ng-show="gf.data.modus===\'runnig_number\'" class="form-group col-sm-2 text-muted"><label ng-bind="gf.data.groupCount"></label><label>&nbsp;groups found</label><select class="form-control invisible"></select></fieldset></form></div><div id="fnf-groupfiles-grid-container" class="fnf-grid-container scroll flex horizontal layout"><div id="fnf-groupfiles-grid" class="fnf-grid" ag-grid="gf.data.gridOptions"></div></div><div class="horizontal layout fnf-panel-bg"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"><button fnf-click-on-ctrl-enter type="button" class="btn btn-primary pull-right" data-dismiss="modal" ng-disabled="!gf.data.okEnabled" ng-click="gf.move()">Move</button> <button type="button" class="btn btn-secondary pull-right" data-dismiss="modal" ng-disabled="!gf.data.okEnabled" ng-click="gf.copy()">Copy</button> <button type="button" class="btn btn-secondary pull-right" data-dismiss="modal">Cancel</button></div></div></div></div></div></div>'),e.put("/fnf/commands/mkdir/dialog.html",'<div id="fnf-mkdir-action-dialog" ng-controller="MkdirActionController as mkdir" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="gridModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">Make Directory</h4></div><div class="modal-body"><form class="form-inline"><fieldset class="form-group"><label ng-bind="mkdir.targetDir + \'/ \'"></label>&nbsp; <input autofocus type="text" class="form-control" aria-label="Target folder" ng-model="mkdir.name"></fieldset></form></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button> <button fnf-click-on-ctrl-enter type="button" class="btn btn-primary" data-dismiss="modal" ng-disabled="!mkdir.targetDir" ng-click="mkdir.mkdir()">MkDir</button></div></div></div></div>'),e.put("/fnf/commands/move/dialog.html",'<div id="fnf-move-action-dialog" ng-controller="MoveActionController as move" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="gridModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">Move</h4></div><div class="modal-body"><fieldset class="form-group"><label>Source <span class="text-muted" ng-show="copy.move">&nbsp;&nbsp;&nbsp;scanning...{{move.sum}} <i class="fa fa-refresh fa-spin"></i></span></label><input readonly="readonly" type="text" class="form-control" aria-label="Target folder" ng-model="move.sourceText"></fieldset><fieldset class="form-group"><label>Target</label><div class="input-group"><input autofocus type="text" class="form-control" aria-label="Target folder" ng-model="move.targetDir"><div class="input-group-btn"><button type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><div class="dropdown-menu dropdown-menu-right"><a ng-repeat="f in move.getPossibleTargetFolders() track by $index" class="dropdown-item" href="#" ng-bind="f" ng-click="move.setTargetDir(f)"></a></div></div></div></fieldset><div ng-show="move.optionsVisible">TODO Options</div></div><div class="modal-footer"><button type="button" class="btn btn-secondary pull-left" ng-click="move.toggleOptions()">Options</button> <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button> <button fnf-click-on-ctrl-enter type="button" class="btn btn-primary" data-dismiss="modal" ng-disabled="!move.okEnabled" ng-click="move.move()">Move</button></div></div></div></div>'),e.put("/fnf/commands/multirename/dialog.html",'<div id="fnf-multirename-action-dialog" class="fullscreen modal fade from-bottom" ng-controller="MultirenameActionController as multirename" data-backdrop="false" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-body fullbleed layout vertical fit"><div><button type="button" class="btn btn-link pull-right" data-dismiss="modal">&times;</button><div class="col-xs-11 col-sm-11 col-md-11 col-lg-11 col-xl-11 pull-left"><h4><i class="fa fa-arrow-circle-o-down" data-dismiss="modal"></i> Multi Rename</h4></div></div><div><form class="form"><fieldset class="form-group col-sm-3" style="margin-bottom: 0"><label for="nameInput">New Name</label><input autofocus type="text" class="form-control form-group col-sm-6" id="nameInput" placeholder="[N].[E]" ng-model="multirename.data.name" ng-dblclick="multirename.data.name=\'[N].[E]\';multirename.softUpdateTableModel();" ng-change="multirename.softUpdateTableModel()"></fieldset><fieldset class="form-group col-sm-3"><label>Capitalize</label><select class="form-control c-select" ng-model="multirename.data.capitalizeMode" ng-change="multirename.softUpdateTableModel()"><option ng-repeat="i in multirename.options.capitalizeModes" value="{{i.value}}" ng-bind="i.label"></option></select></fieldset><fieldset class="form-group col-sm-2"><label>Counter Start</label><select class="form-control c-select" ng-model="multirename.data.counterStart" ng-change="multirename.softUpdateTableModel()"><option ng-repeat="i in multirename.options.starts" value="{{i.value}}" ng-bind="i.label"></option></select></fieldset><fieldset class="form-group col-sm-2"><label>Counter Step</label><select class="form-control c-select" ng-model="multirename.data.counterStep" ng-change="multirename.softUpdateTableModel()"><option ng-repeat="i in multirename.options.steps" value="{{i.value}}" ng-bind="i.label"></option></select></fieldset><fieldset class="form-group col-sm-2"><label>Counter Digits</label><select class="form-control c-select" ng-model="multirename.data.counterDigits" ng-change="multirename.softUpdateTableModel()"><option ng-repeat="i in multirename.options.digits" value="{{i.value}}" ng-bind="i.label"></option></select></fieldset><fieldset class="form-group col-sm-12"><label>[N] Name, [N#-#] Part of Name, [E] Extension, [E#-#] Part of Ext, [C] Counter, [P] Parent Dir</label></fieldset></form><form class="form form-inline"><fieldset class="form-group col-sm-2"><label class="c-input c-checkbox"><input type="checkbox" ng-model="multirename.data.replaceGermanUmlauts" ng-click="multirename.softUpdateTableModel()"> <span class="c-indicator"></span> Fix german umlauts</label></fieldset><fieldset class="form-group col-sm-2"><label class="c-input c-checkbox"><input class="form-control" type="checkbox" ng-model="multirename.data.replaceRiskyChars" ng-click="multirename.softUpdateTableModel()"> <span class="c-indicator"></span> Replace risky chars</label></fieldset><fieldset class="form-group col-sm-2"><label class="c-input c-checkbox"><input class="form-control" type="checkbox" ng-model="multirename.data.replaceSpaceToUnderscore" ng-click="multirename.softUpdateTableModel()"> <span class="c-indicator"></span> Space to underscore</label></fieldset><fieldset class="form-group col-sm-2"><label class="c-input c-checkbox"><input class="form-control" type="checkbox" ng-model="multirename.data.replaceParentDir" ng-click="multirename.softUpdateTableModel()"> <span class="c-indicator"></span> Remove parent dir</label></fieldset></form><form class="form form-inline"><fieldset class="form-group col-sm-12"><label class="c-input c-checkbox"><input class="form-control" type="checkbox" ng-model="multirename.data.replacementsChecked" ng-click="multirename.softUpdateTableModel()"> <span class="c-indicator"></span> Search and replace</label></fieldset><fieldset class="form-group col-sm-12 fnf-replacements" ng-show="multirename.data.replacementsChecked" ng-repeat="rep in multirename.data.replacements"><label class="c-input c-checkbox"><input class="form-control" type="checkbox" ng-model="rep.checked" ng-click="multirename.softUpdateTableModel()"> <span class="c-indicator"></span> Replace</label><button class="btn btn-link brn-sm dropdown-toggle" type="button" id="dropdownMenu{{$index}}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><div class="dropdown-menu" aria-labelledby="dropdownMenu{{$index}}"><a ng-repeat="makro in multirename.data.makros" ng-click="multirename.makroSelected(rep, makro)" class="dropdown-item" href="#"><div ng-bind="makro.title"></div><div ng-bind="makro.example" class="text-muted"></div></a></div><input type="text" class="form-control form-control-sm fnf-mr-textfrom" id="textFrom{{$index}}" ng-model="rep.textFrom" ng-disabled="!rep.checked" ng-change="multirename.softUpdateTableModel()"><label>with</label><input type="text" class="form-control form-control-sm" ng-model="rep.textTo" ng-disabled="!rep.checked" ng-change="multirename.softUpdateTableModel()"><label class="c-input c-checkbox"><input class="form-control" type="checkbox" ng-model="rep.regExpr" ng-click="multirename.softUpdateTableModel()"> <span class="c-indicator"></span> RegExp</label><label class="c-input c-checkbox"><input class="form-control" type="checkbox" ng-model="rep.ifFlag" ng-click="multirename.softUpdateTableModel()"> <span class="c-indicator"></span> only if match</label><input type="text" class="form-control form-control-sm" ng-model="rep.ifMatch" ng-disabled="!rep.ifFlag || !rep.checked" ng-change="multirename.softUpdateTableModel()"></fieldset></form></div><div id="fnf-groupfiles-grid-container" class="fnf-grid-container scroll flex horizontal layout"><div id="fnf-multirename-grid" class="fnf-grid" ag-grid="multirename.data.gridOptions"></div></div><div class="horizontal layout fnf-panel-bg"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"><button type="button" class="btn btn-primary pull-right" data-dismiss="modal" ng-disabled="!multirename.data.okEnabled" ng-click="multirename.multirename()">Rename</button> <button type="button" class="btn btn-secondary pull-right" data-dismiss="modal">Cancel</button></div></div></div></div></div></div>'),e.put("/fnf/commands/rename/dialog.html",'<div id="fnf-rename-action-dialog" ng-controller="RenameActionController as rename" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="gridModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">Rename</h4></div><div class="modal-body"><fieldset class="form-group"><label>Current Name</label><input readonly="readonly" type="text" class="form-control" aria-label="Target folder" ng-model="rename.sourceText"></fieldset><fieldset class="form-group"><label>New Name</label><input autofocus type="text" class="form-control" aria-label="Target folder" ng-model="rename.targetText"></fieldset><div ng-show="rename.optionsVisible">TODO Options</div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button> <button fnf-click-on-ctrl-enter type="button" class="btn btn-primary" data-dismiss="modal" ng-disabled="!rename.targetText" ng-click="rename.rename()">Rename</button></div></div></div></div>'),e.put("/fnf/commands/select/deselectdialog.html",'<div id="fnf-deselection-dialog" ng-controller="DeselectionController as desel" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="gridModalLabel" aria-hidden="true"><div class="modal-dialog modal-sm"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="gridModalLabel">Reduce selections</h4></div><div class="modal-body"><fieldset><span class="input-group"><input autofocus type="text" class="form-control" ng-model="desel.data.quickinput"> <a href="javascript:void(0)" class="input-group-addon dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></a><ul class="dropdown-menu"><li><a href="javascript:void(0)" ng-click="desel.setQuickinput(\'.jsp$\')">*.jsp</a></li><li><a href="javascript:void(0)" ng-click="desel.setQuickinput(\'.epub$\')">*.epub</a></li><li><a href="javascript:void(0)" ng-click="desel.setQuickinput(\'.\')">*.*</a></li></ul></span></fieldset></div><div class="modal-footer"><button class="btn btn-default" data-dismiss="modal" aria-hidden="true">Cancel</button> <button fnf-click-on-ctrl-enter data-dismiss="modal" aria-hidden="true" data-ng-click="desel.ok();" class="btn btn-primary">OK</button></div></div></div></div>'),e.put("/fnf/commands/select/selectdialog.html",'<div id="fnf-selection-dialog" ng-controller="SelectionController as sel" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="gridModalLabel" aria-hidden="true"><div class="modal-dialog modal-sm"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="gridModalLabel">Enhance selections</h4></div><div class="modal-body"><fieldset><span class="input-group"><input autofocus type="text" class="form-control" ng-model="sel.data.quickinput"> <a href="javascript:void(0)" class="input-group-addon dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></a><ul class="dropdown-menu"><li><a href="javascript:void(0)" ng-click="sel.setQuickinput(\'.cbr$|.cbz$\')">.cbr$|.cbz$</a></li><li><a href="javascript:void(0)" ng-click="sel.setQuickinput(\'.jsp\')">.jsp$</a></li><li><a href="javascript:void(0)" ng-click="sel.setQuickinput(\'.epub\')">.epub$</a></li><li><a href="javascript:void(0)" ng-click="sel.setQuickinput(\'.\')">.</a></li></ul></span></fieldset></div><div class="modal-footer"><button class="btn btn-default" data-dismiss="modal" aria-hidden="true">Cancel</button> <button fnf-click-on-ctrl-enter data-dismiss="modal" aria-hidden="true" data-ng-click="sel.ok();" class="btn btn-primary">OK</button></div></div></div></div>'),e.put("/fnf/gui/filecount/filecount.html","<b>{{ model.getSelectedSizeSumText() }}</b> / {{ model.getSizeSumText() }} &nbsp;in <b>{{ model.getSelectedFileCount() }}</b> / {{ model.getFileCount()}} Files, &nbsp;<b>{{ model.getSelectedFolderCount() }}</b> / {{ model.getFolderCount()}} Folders"),e.put("/fnf/gui/filterinput/filterinput.html",'<div class="input-group text-xs-right"><input class="form-control fnf-filter-input" type="text" placeholder="Filter" ng-show="filterInputVisible" ng-change="filterInputChanged()" ng-model="quickFilterText"> <span class="input-group-btn"><button class="btn btn-link" type="submit" ng-click="onClicked()" ng-dblclick="onDblClicked()"><i class="fa fa-filter"></i></button></span></div>'),e.put("/fnf/gui/folderbutton/folderbutton.html",'<div class="btn-group" role="group"><button id="btnGroupDrop2" type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" ng-bind="label"></button><div class="dropdown-menu" aria-labelledby="btnGroupDrop2"><a ng-repeat="disk in startingPoints" class="dropdown-item" href="#" ng-click="onFolderChanged({folder:disk})" ng-bind="disk"></a></div></div>'),e.put("/fnf/gui/menuitem/menuitem.html",'<a class="dropdown-item text-nowrap" href="#" ng-click="clickOn(id)">{{label}} <span class="pull-right" ng-bind-html="shortcut"></span></a>'),e.put("/fnf/gui/pathlabel/pathlabel.html",'<a ng-repeat-start="p in pathes track by $index" class="btn btn-link btn-sm fnf-link-btn" href="#" ng-click="clickOnIndex($index)" ng-class="{\'last\': $last}" ng-show="p" ng-bind="p"></a><span class="fnf-path-sep" ng-if="!$last" ng-repeat-end>/</span>')}]);